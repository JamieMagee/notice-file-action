#!/usr/bin/env node
import { createRequire } from 'module';
const require = createRequire(import.meta.url);
var Uc=Object.create;var Lr=Object.defineProperty;var Dc=Object.getOwnPropertyDescriptor;var Hc=Object.getOwnPropertyNames;var Mc=Object.getPrototypeOf,zc=Object.prototype.hasOwnProperty;var $=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bc=(t,e)=>{for(var r in e)Lr(t,r,{get:e[r],enumerable:!0})},Fc=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Hc(e))!zc.call(t,n)&&n!==r&&Lr(t,n,{get:()=>e[n],enumerable:!(s=Dc(e,n))||s.enumerable});return t};var We=(t,e,r)=>(r=t!=null?Uc(Mc(t)):{},Fc(e||!t||!t.__esModule?Lr(r,"default",{value:t,enumerable:!0}):r,t));var Zi=q((cs,us)=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});function Jh(t){return t.encrypted}var as=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{s&&r.connect(),Jh(t)&&n&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),i&&t.once("close",r.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&i&&r.close(t._hadError)};cs.default=as;us.exports=as;us.exports.default=as});var yo=q((Eg,mo)=>{"use strict";var kf=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Tf=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Sf=new Set([500,502,503,504]),Af={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Rf={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function de(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Cf(t){return t?Sf.has(t.status):!0}function ys(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let s of r){let[n,i]=s.split(/=/,2);e[n.trim()]=i===void 0?!0:i.trim().replace(/^"|"$/g,"")}return e}function Of(t){let e=[];for(let r in t){let s=t[r];e.push(s===!0?r:r+"="+s)}if(e.length)return e.join(", ")}mo.exports=class{constructor(e,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=s!==!1,this._ignoreCargoCult=!!o,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=ys(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=ys(e.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Of(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Tf.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||kf.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){return!this.evaluateRequest(e).revalidation}_evaluateRequestHitResult(e){return{response:{headers:this.responseHeaders()},revalidation:e}}_evaluateRequestRevalidation(e,r){return{synchronous:r,headers:this.revalidationHeaders(e)}}_evaluateRequestMissResult(e){return{response:void 0,revalidation:this._evaluateRequestRevalidation(e,!0)}}evaluateRequest(e){if(this._assertRequestHasHeaders(e),this._rescc["must-revalidate"])return this._evaluateRequestMissResult(e);if(!this._requestMatches(e,!1))return this._evaluateRequestMissResult(e);let r=ys(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)?this._evaluateRequestMissResult(e):r["max-age"]&&this.age()>de(r["max-age"])?this._evaluateRequestMissResult(e):r["min-fresh"]&&this.maxAge()-this.age()<de(r["min-fresh"])?this._evaluateRequestMissResult(e):this.stale()?"max-stale"in r&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(e,!1)):this._evaluateRequestMissResult(e):this._evaluateRequestHitResult(void 0)}_requestMatches(e,r){return!!((!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let s in e)Af[s]||(r[s]=e[s]);if(e.connection){let s=e.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return de(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return de(this._rescc["s-maxage"])}if(this._rescc["max-age"])return de(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(e,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(e,(r-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+de(this._rescc["stale-if-error"]),s=e+de(this._rescc["stale-while-revalidate"]);return Math.round(Math.max(0,e,r,s)*1e3)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+de(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){let e=de(this._rescc["stale-while-revalidate"]);return e>0&&this.maxAge()+e>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._ignoreCargoCult=!!e.icc,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Cf(r))return{policy:this,modified:!1,matches:!0};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0);let n={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!s)return{policy:new this.constructor(e,r,n),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Rf[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,n),modified:!1,matches:!0}}}});var go=q(gs=>{gs.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",s=Array.isArray(e);r=s?"[":"{";var n=!0;for(var i in e){var o=typeof e[i]=="function"||!s&&typeof e[i]>"u";Object.hasOwnProperty.call(e,i)&&!o&&(n||(r+=","),n=!1,s?e[i]==null?r+="null":r+=t(e[i]):e[i]!==void 0&&(r+=t(i)+":"+t(e[i])))}return r+=s?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};gs.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var xo=q((Cg,wo)=>{"use strict";var jf=$("events"),_o=go(),Nf=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new($(e[r]))(t)}return new Map},bo=["sqlite","postgres","mysql","mongo","redis","tiered"],_s=class extends jf{constructor(e,{emitErrors:r=!0,...s}={}){if(super(),this.opts={namespace:"keyv",serialize:_o.stringify,deserialize:_o.parse,...typeof e=="string"?{uri:e}:e,...s},!this.opts.store){let i={...this.opts};this.opts.store=Nf(i)}if(this.opts.compression){let i=this.opts.compression;this.opts.serialize=i.serialize.bind(i),this.opts.deserialize=i.deserialize.bind(i)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",i=>this.emit("error",i)),this.opts.store.namespace=this.opts.namespace;let n=i=>async function*(){for await(let[o,a]of typeof i=="function"?i(this.opts.store.namespace):i){let c=await this.opts.deserialize(a);if(!(this.opts.store.namespace&&!o.includes(this.opts.store.namespace))){if(typeof c.expires=="number"&&Date.now()>c.expires){this.delete(o);continue}yield[this._getKeyUnprefix(o),c.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=n(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=n(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return bo.includes(this.opts.store.opts.dialect)||bo.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:s}=this.opts,n=Array.isArray(e),i=n?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(n&&s.getMany===void 0){let o=[];for(let a of i)o.push(Promise.resolve().then(()=>s.get(a)).then(c=>typeof c=="string"?this.opts.deserialize(c):this.opts.compression?this.opts.deserialize(c):c).then(c=>{if(c!=null)return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(a).then(()=>{}):r&&r.raw?c:c.value}));return Promise.allSettled(o).then(a=>{let c=[];for(let d of a)c.push(d.value);return c})}return Promise.resolve().then(()=>n?s.getMany(i):s.get(i)).then(o=>typeof o=="string"?this.opts.deserialize(o):this.opts.compression?this.opts.deserialize(o):o).then(o=>{if(o!=null)return n?o.map((a,c)=>{if(typeof a=="string"&&(a=this.opts.deserialize(a)),a!=null){if(typeof a.expires=="number"&&Date.now()>a.expires){this.delete(e[c]).then(()=>{});return}return r&&r.raw?a:a.value}}):typeof o.expires=="number"&&Date.now()>o.expires?this.delete(e).then(()=>{}):r&&r.raw?o:o.value})}set(e,r,s){let n=this._getKeyPrefix(e);typeof s>"u"&&(s=this.opts.ttl),s===0&&(s=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let o=typeof s=="number"?Date.now()+s:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:o},this.opts.serialize(r)}).then(o=>i.set(n,o,s)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let n=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let i=[];for(let o of n)i.push(r.delete(o));return Promise.allSettled(i).then(o=>o.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(n))}let s=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(s))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(async()=>typeof s.has=="function"?s.has(r):await s.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};wo.exports=_s});var To=q((Fg,ko)=>{"use strict";var zf=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];ko.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(zf)),s={};for(let n of r)n in e||(s[n]={get(){let i=t[n];return typeof i=="function"?i.bind(t):i},set(i){t[n]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,s),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var Ao=q((Vg,So)=>{"use strict";var{Transform:Bf,PassThrough:Ff}=$("stream"),vs=$("zlib"),Vf=To();So.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof vs.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let s=!0,n=new Bf({transform(a,c,d){s=!1,d(null,a)},flush(a){a()}}),i=new Ff({autoDestroy:!1,destroy(a,c){t.destroy(),c(a)}}),o=r?vs.createBrotliDecompress():vs.createUnzip();return o.once("error",a=>{if(s&&!t.readable){i.end();return}i.destroy(a)}),Vf(t,i),t.pipe(n).pipe(o).pipe(i),i}});var Ns=q((p_,Go)=>{"use strict";var js=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};Go.exports=js});var Is=q((m_,Zo)=>{"use strict";Zo.exports=t=>{if(t.listenerCount("error")!==0)return t;t.__destroy=t._destroy,t._destroy=(...r)=>{let s=r.pop();t.__destroy(...r,async n=>{await Promise.resolve(),s(n)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var He=q((y_,ea)=>{"use strict";var{URL:Jo}=$("url"),yl=$("events"),gl=$("tls"),_l=$("http2"),bl=Ns(),wl=Is(),F=Symbol("currentStreamCount"),Ko=Symbol("request"),V=Symbol("cachedOriginSet"),xe=Symbol("gracefullyClosing"),_r=Symbol("length"),Qo=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],xl=(t,e,r)=>{let s=0,n=t.length;for(;s<n;){let i=s+n>>>1;r(t[i],e)?s=i+1:n=i}return s},vl=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,qs=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];s[V].length>0&&s[V].length<e[V].length&&s[V].every(n=>e[V].includes(n))&&s[F]+e[F]<=e.remoteSettings.maxConcurrentStreams&&Xo(s)}},Yo=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];if(e[V].length>0&&e[V].length<s[V].length&&e[V].every(n=>s[V].includes(n))&&e[F]+s[F]<=s.remoteSettings.maxConcurrentStreams)return Xo(e),!0}return!1},Xo=t=>{t[xe]=!0,t[F]===0&&t.close()},dt=class t extends yl{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=s,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new bl({maxSize:n})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let s=0;s<Qo.length;s++){let n=Qo[s];r+=":",e&&e[n]!==void 0&&(r+=e[n])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let s=this.queue[e][r];s.completed||(s.completed=!0,s())}}_isBetterSession(e,r){return e>r}_accept(e,r,s,n){let i=0;for(;i<r.length&&e[F]<e.remoteSettings.maxConcurrentStreams;)r[i].resolve(e),i++;r.splice(0,i),r.length>0&&(this.getSession(s,n,r),r.length=0)}getSession(e,r,s){return new Promise((n,i)=>{Array.isArray(s)&&s.length>0?(s=[...s],n()):s=[{resolve:n,reject:i}];try{if(typeof e=="string")e=new Jo(e);else if(!(e instanceof Jo))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:h}=r,{hostname:y}=e;if(h&&y!==h)throw new Error(`Origin ${y} differs from servername ${h}`)}}catch(h){for(let y=0;y<s.length;y++)s[y].reject(h);return}let o=this.normalizeOptions(r),a=e.origin;if(o in this.sessions){let h=this.sessions[o],y=-1,m=-1,b;for(let k=0;k<h.length;k++){let f=h[k],T=f.remoteSettings.maxConcurrentStreams;if(T<y)break;if(!f[V].includes(a))continue;let x=f[F];x>=T||f[xe]||f.destroyed||(b||(y=T),this._isBetterSession(x,m)&&(b=f,m=x))}if(b){this._accept(b,s,a,r);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...s);return}}else this.queue[o]={[_r]:0};let c=()=>{o in this.queue&&this.queue[o][a]===d&&(delete this.queue[o][a],--this.queue[o][_r]===0&&delete this.queue[o])},d=async()=>{this._sessionCount++;let h=`${a}:${o}`,y=!1,m;try{let b={...r};b.settings===void 0&&(b.settings=this.settings),b.session===void 0&&(b.session=this.tlsSessionCache.get(h)),m=await(b.createConnection||this.createConnection).call(this,e,b),b.createConnection=()=>m;let f=_l.connect(e,b);f[F]=0,f[xe]=!1;let T=()=>{let{socket:E}=f,P;return E.servername===!1?(E.servername=E.remoteAddress,P=f.originSet,E.servername=!1):P=f.originSet,P},x=()=>f[F]<f.remoteSettings.maxConcurrentStreams;f.socket.once("session",E=>{this.tlsSessionCache.set(h,E)}),f.once("error",E=>{for(let P=0;P<s.length;P++)s[P].reject(E);this.tlsSessionCache.delete(h)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(this._sessionCount--,y){this._emptySessionCount--;let E=this.sessions[o];E.length===1?delete this.sessions[o]:E.splice(E.indexOf(f),1)}else{c();let E=new Error("Session closed without receiving a SETTINGS frame");E.code="HTTP2WRAPPER_NOSETTINGS";for(let P=0;P<s.length;P++)s[P].reject(E)}this._processQueue()});let N=()=>{let E=this.queue[o];if(!E)return;let P=f[V];for(let D=0;D<P.length;D++){let W=P[D];if(W in E){let{listeners:pe,completed:Lc}=E[W],Jt=0;for(;Jt<pe.length&&x();)pe[Jt].resolve(f),Jt++;if(E[W].listeners.splice(0,Jt),E[W].listeners.length===0&&!Lc&&(delete E[W],--E[_r]===0)){delete this.queue[o];break}if(!x())break}}};f.on("origin",()=>{f[V]=T()||[],f[xe]=!1,Yo(this.sessions[o],f),!(f[xe]||!x())&&(N(),x()&&qs(this.sessions[o],f))}),f.once("remoteSettings",()=>{if(d.destroyed){let E=new Error("Agent has been destroyed");for(let P=0;P<s.length;P++)s[P].reject(E);f.destroy();return}if(f.setLocalWindowSize&&f.setLocalWindowSize(1024*1024*4),f[V]=T()||[],f.socket.encrypted){let E=f[V][0];if(E!==a){let P=new Error(`Requested origin ${a} does not match server ${E}`);for(let D=0;D<s.length;D++)s[D].reject(P);f.destroy();return}}c();{let E=this.sessions;if(o in E){let P=E[o];P.splice(xl(P,f,vl),0,f)}else E[o]=[f]}y=!0,this._emptySessionCount++,this.emit("session",f),this._accept(f,s,a,r),f[F]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),f.on("remoteSettings",()=>{x()&&(N(),x()&&qs(this.sessions[o],f))})}),f[Ko]=f.request,f.request=(E,P)=>{if(f[xe])throw new Error("The session is gracefully closing. No new streams are allowed.");let D=f[Ko](E,P);return f.ref(),f[F]++===0&&this._emptySessionCount--,D.once("close",()=>{if(--f[F]===0&&(this._emptySessionCount++,f.unref(),this._emptySessionCount>this.maxEmptySessions||f[xe])){f.close();return}f.destroyed||f.closed||x()&&!Yo(this.sessions[o],f)&&(qs(this.sessions[o],f),N(),f[F]===0&&this._processQueue())}),D}}catch(b){c(),this._sessionCount--;for(let k=0;k<s.length;k++)s[k].reject(b)}};d.listeners=s,d.completed=!1,d.destroyed=!1,this.queue[o][a]=d,this.queue[o][_r]++,this._processQueue()})}request(e,r,s,n){return new Promise((i,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{let c=a.request(s,n);wl(c),i(c)}catch(c){o(c)}}}])})}async createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let s=e.port||443,n=e.hostname;typeof r.servername>"u"&&(r.servername=n);let i=gl.connect(s,n,r);return r.socket&&(i._peername={family:void 0,address:void 0,port:s}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:s}=this;for(let n in s){let i=s[n];for(let o=0;o<i.length;o++){let a=i[o];if(a[F]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:s}=this;for(let n in r){let i=r[n];for(let o=0;o<i.length;o++)i[o].destroy(e)}for(let n in s){let i=s[n];for(let o in i)i[o].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};dt.kCurrentStreamCount=F;dt.kGracefullyClosing=xe;ea.exports={Agent:dt,globalAgent:new dt}});var Ls=q((g_,ta)=>{"use strict";var{Readable:El}=$("stream"),$s=class extends El{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};ta.exports=$s});var sa=q((__,ra)=>{"use strict";ra.exports=(t,e,r)=>{for(let s of r)t.on(s,(...n)=>e.emit(s,...n))}});var Dt=q((w_,na)=>{"use strict";var Me=(t,e,r)=>{na.exports[e]=class extends t{constructor(...n){super(typeof r=="string"?r:r(n)),this.name=`${super.name} [${e}]`,this.code=e}}};Me(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${s?"one of":"of"} type ${r}. Received ${typeof t[2]}`});Me(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);Me(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);Me(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);Me(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);Me(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);Me(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var oa=q((x_,ia)=>{"use strict";ia.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Us=q((v_,aa)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:kl}=Dt(),Tl=oa(),Sl=/^[\^`\-\w!#$%&*+.|~]+$/;aa.exports=t=>{if(typeof t!="string"||!Sl.test(t)&&!Tl(t))throw new kl("Header name",t)}});var Ds=q((E_,ca)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:Al,ERR_INVALID_CHAR:Rl}=Dt(),Cl=/[^\t\u0020-\u007E\u0080-\u00FF]/;ca.exports=(t,e)=>{if(typeof e>"u")throw new Al(e,t);if(Cl.test(e))throw new Rl("header content",t)}});var ha=q((k_,da)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:ua}=Dt(),Ol={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new ua;default:{let r=t.session===void 0?t:t.session.socket,s=r[e];return typeof s=="function"?s.bind(r):s}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:s}=t;return s===void 0?t.setTimeout=r:s.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new ua;default:{let s=t.session===void 0?t:t.session.socket;return s[e]=r,!0}}}};da.exports=Ol});var Bs=q((T_,ga)=>{"use strict";var{URL:Hs,urlToHttpOptions:fa}=$("url"),Pl=$("http2"),{Writable:jl}=$("stream"),{Agent:Nl,globalAgent:Il}=He(),ql=Ls(),$l=sa(),{ERR_INVALID_ARG_TYPE:br,ERR_INVALID_PROTOCOL:Ll,ERR_HTTP_HEADERS_SENT:la}=Dt(),Ul=Us(),Dl=Ds(),Hl=ha(),{HTTP2_HEADER_STATUS:pa,HTTP2_HEADER_METHOD:ma,HTTP2_HEADER_PATH:ya,HTTP2_HEADER_AUTHORITY:Ht,HTTP2_METHOD_CONNECT:Ml}=Pl.constants,z=Symbol("headers"),ht=Symbol("origin"),Mt=Symbol("session"),Ms=Symbol("options"),wr=Symbol("flushedHeaders"),ft=Symbol("jobs"),zt=Symbol("pendingAgentPromise"),zs=class extends jl{constructor(e,r,s){if(super({autoDestroy:!1,emitClose:!1}),typeof e=="string"?e=fa(new Hs(e)):e instanceof Hs?e=fa(e):e={...e},typeof r=="function"||r===void 0?(s=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Mt]=r.h2session,this[Mt].destroyed)throw new Error("The session has been closed already");this.protocol=this[Mt].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new Nl({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=Il;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new br("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new Ll(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:n}=r;r.timeout=void 0,this[z]=Object.create(null),this[ft]=[],this[zt]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:i}=r;if(i)for(let a in i)this.setHeader(a,i[a]);r.auth&&!("authorization"in this[z])&&(this[z].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Ms]=r,this[ht]=new Hs(`${this.protocol}//${r.servername||r.host}:${r.port}`);let o=r._reuseSocket;o&&(r.createConnection=(...a)=>o.destroyed?this.agent.createConnection(...a):o,this.agent.getSession(this[ht],this[Ms]).catch(()=>{})),n&&this.setTimeout(n),s&&this.once("response",s),this[wr]=!1}get method(){return this[z][ma]}set method(e){e&&(this[z][ma]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?Ht:ya;return this[z][e]}set path(e){if(e){let r=this.method==="CONNECT"?Ht:ya;this[z][r]=e}}get host(){return this[ht].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(e,r,s);this._request?n():this[ft].push(n)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[ft].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[zt]}catch(s){this.aborted&&(e=s)}r(e)}async flushHeaders(){if(this[wr]||this.destroyed)return;this[wr]=!0;let e=this.method===Ml,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}e||$l(s,this,["timeout","continue"]),s.once("error",i=>{this.destroy(i)}),s.once("aborted",()=>{let{res:i}=this;i?(i.aborted=!0,i.emit("aborted"),i.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let n=(i,o,a)=>{let c=new ql(this.socket,s.readableHighWaterMark);this.res=c,c.url=`${this[ht].origin}${this.path}`,c.req=this,c.statusCode=i[pa],c.headers=i,c.rawHeaders=a,c.once("end",()=>{c.complete=!0,c.socket=null,c.connection=null}),e?(c.upgrade=!0,this.emit("connect",c,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",d=>{!c._dumped&&!c.push(d)&&s.pause()}),s.once("end",()=>{this.aborted||c.push(null)}),this.emit("response",c)||c._dump())};s.once("response",n),s.once("headers",i=>this.emit("information",{statusCode:i[pa]})),s.once("trailers",(i,o,a)=>{let{res:c}=this;if(c===null){n(i,o,a);return}c.trailers=i,c.rawTrailers=a}),s.once("close",()=>{let{aborted:i,res:o}=this;if(o){i&&(o.aborted=!0,o.emit("aborted"),o.destroy());let a=()=>{o.emit("close"),this.destroy(),this.emit("close")};o.readable?o.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(s,Hl);for(let i of this[ft])i();this[ft].length=0,this.emit("socket",this.socket)};if(!(Ht in this[z])&&!e&&(this[z][Ht]=this[ht].host),this[Mt])try{r(this[Mt].request(this[z]))}catch(s){this.destroy(s)}else{this.reusedSocket=!0;try{let s=this.agent.request(this[ht],this[Ms],this[z]);this[zt]=s,r(await s),this[zt]=!1}catch(s){this[zt]=!1,this.destroy(s)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[z])}hasHeader(e){if(typeof e!="string")throw new br("name","string",e);return!!this[z][e.toLowerCase()]}getHeader(e){if(typeof e!="string")throw new br("name","string",e);return this[z][e.toLowerCase()]}get headersSent(){return this[wr]}removeHeader(e){if(typeof e!="string")throw new br("name","string",e);if(this.headersSent)throw new la("remove");delete this[z][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new la("set");Ul(e),Dl(e,r);let s=e.toLowerCase();if(s==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}s==="host"&&this.method==="CONNECT"?this[z][Ht]=r:this[z][s]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let s=()=>this._request.setTimeout(e,r);return this._request?s():this[ft].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};ga.exports=zs});var ba=q((S_,_a)=>{"use strict";var zl=$("tls");_a.exports=(t={},e=zl.connect)=>new Promise((r,s)=>{let n=!1,i,o=async()=>{await c,i.off("timeout",a),i.off("error",s),t.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:n}),n&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:n}))},a=async()=>{n=!0,o()},c=(async()=>{try{i=await e(t,o),i.on("error",s),i.once("timeout",a)}catch(d){s(d)}})()})});var xa=q((A_,wa)=>{"use strict";var{isIP:Bl}=$("net"),Fl=$("assert"),Vl=t=>{if(t[0]==="["){let r=t.indexOf("]");return Fl(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};wa.exports=t=>{let e=Vl(t);return Bl(e)?"":e}});var Ca=q((R_,Bt)=>{"use strict";var{URL:va,urlToHttpOptions:Ea}=$("url"),ka=$("http"),Fs=$("https"),Wl=ba(),Gl=Ns(),{Agent:Zl,globalAgent:Jl}=He(),Kl=Bs(),Ql=xa(),Ta=Is(),Sa=new Gl({maxSize:100}),Yl=new Map,Xl=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let s=()=>{t.emit("free",e,r)};e.on("free",s);let n=()=>{t.removeSocket(e,r)};e.on("close",n);let i=()=>{let{freeSockets:a}=t;for(let c of Object.values(a))if(c.includes(e)){e.destroy();return}};e.on("timeout",i);let o=()=>{t.removeSocket(e,r),e.off("close",n),e.off("free",s),e.off("timeout",i),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},Aa=(t,e=new Map,r=void 0)=>async s=>{let n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!t.has(n)){if(e.has(n))return{alpnProtocol:(await e.get(n)).alpnProtocol};let{path:i}=s;s.path=s.socketPath;let o=Wl(s,r);e.set(n,o);try{let a=await o;return t.set(n,a.alpnProtocol),e.delete(n),s.path=i,a}catch(a){throw e.delete(n),s.path=i,a}}return{alpnProtocol:t.get(n)}},Ra=Aa(Sa,Yl);Bt.exports=async(t,e,r)=>{if(typeof t=="string"?t=Ea(new va(t)):t instanceof va?t=Ea(t):t={...t},typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let s=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Ql(e.headers&&e.headers.host||e.host),e.port=e.port||(s?443:80),e._defaultAgent=s?Fs.globalAgent:ka.globalAgent;let n=e.resolveProtocol||Ra,{agent:i}=e;if(i!==void 0&&i!==!1&&i.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(s){e.resolveSocket=!0;let{socket:o,alpnProtocol:a,timeout:c}=await n(e);if(c){o&&o.destroy();let h=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw h.code="ETIMEDOUT",h.ms=e.timeout,h}o&&e.createConnection&&(o.destroy(),o=void 0),delete e.resolveSocket;let d=a==="h2";if(i&&(i=d?i.http2:i.https,e.agent=i),i===void 0&&(i=d?Jl:Fs.globalAgent),o)if(i===!1)o.destroy();else{let h=(d?Zl:Fs.Agent).prototype.createConnection;i.createConnection===h?d?e._reuseSocket=o:Xl(i,o,e):o.destroy()}if(d)return Ta(new Kl(e,r))}else i&&(e.agent=i.http);return e.headers&&(e.headers={...e.headers},e.headers[":authority"]&&(e.headers.host||(e.headers.host=e.headers[":authority"]),delete e.headers[":authority"]),delete e.headers[":method"],delete e.headers[":scheme"],delete e.headers[":path"]),Ta(ka.request(e,r))};Bt.exports.protocolCache=Sa;Bt.exports.resolveProtocol=Ra;Bt.exports.createResolveProtocol=Aa});var Vs=q((C_,Oa)=>{"use strict";var ep=$("stream"),tp=$("tls"),rp=new tp.TLSSocket(new ep.PassThrough)._handle._parentWrap.constructor;Oa.exports=rp});var Gs=q((O_,Pa)=>{"use strict";var Ws=class extends Error{constructor(e,r=""){super(`The proxy server rejected the request with status code ${e} (${r||"empty status message"})`),this.statusCode=e,this.statusMessage=r}};Pa.exports=Ws});var Na=q((P_,ja)=>{"use strict";var sp=(t,e,r)=>{if(!r.some(n=>typeof n==="string"?typeof e===n:e instanceof n)){let n=r.map(i=>typeof i=="string"?i:i.name);throw new TypeError(`Expected '${t}' to be a type of ${n.join(" or ")}, got ${typeof e}`)}};ja.exports=sp});var Zs=q((j_,qa)=>{"use strict";var{URL:Ia}=$("url"),xr=Na();qa.exports=(t,e)=>{xr("proxyOptions",e,["object"]),xr("proxyOptions.headers",e.headers,["object","undefined"]),xr("proxyOptions.raw",e.raw,["boolean","undefined"]),xr("proxyOptions.url",e.url,[Ia,"string"]);let r=new Ia(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:r}}});var vr=q((N_,$a)=>{"use strict";$a.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let s=`${e}:${r}`,n=`Basic ${Buffer.from(s).toString("base64")}`;return{"proxy-authorization":n,authorization:n}}return{}}});var Ma=q((I_,Ha)=>{"use strict";var np=$("tls"),ip=$("http"),La=$("https"),op=Vs(),{globalAgent:ap}=He(),cp=Gs(),Ua=Zs(),up=vr(),Da=(t,e,r)=>{(async()=>{try{let{proxyOptions:s}=t,{url:n,headers:i,raw:o}=s,a=await ap.request(n,s,{...up(t),...i,":method":"CONNECT",":authority":`${e.host}:${e.port}`});a.once("error",r),a.once("response",c=>{let d=c[":status"];if(d!==200){r(new cp(d,""));return}let h=t instanceof La.Agent;if(o&&h){e.socket=a;let m=np.connect(e);m.once("close",()=>{a.destroy()}),r(null,m);return}let y=new op(a);y.encrypted=!1,y._handle.getpeername=m=>{m.family=void 0,m.address=void 0,m.port=void 0},r(null,y)})}catch(s){r(s)}})()},Js=class extends ip.Agent{constructor(e){super(e),Ua(this,e.proxyOptions)}createConnection(e,r){Da(this,e,r)}},Ks=class extends La.Agent{constructor(e){super(e),Ua(this,e.proxyOptions)}createConnection(e,r){Da(this,e,r)}};Ha.exports={HttpOverHttp2:Js,HttpsOverHttp2:Ks}});var Ys=q((q_,za)=>{"use strict";var{Agent:dp}=He(),hp=Vs(),fp=Gs(),lp=Zs(),Qs=class extends dp{constructor(e){super(e),lp(this,e.proxyOptions)}async createConnection(e,r){let s=`${e.hostname}:${e.port||443}`,[n,i,o]=await this._getProxyStream(s);if(i!==200)throw new fp(i,o);if(this.proxyOptions.raw)r.socket=n;else{let a=new hp(n);return a.encrypted=!1,a._handle.getpeername=c=>{c.family=void 0,c.address=void 0,c.port=void 0},a}return super.createConnection(e,r)}};za.exports=Qs});var Fa=q(($_,Ba)=>{"use strict";var{globalAgent:pp}=He(),mp=Ys(),yp=vr(),gp=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",s=>{t.off("error",r),e(s[":status"])})}),Xs=class extends mp{async _getProxyStream(e){let{proxyOptions:r}=this,s={...yp(this),...r.headers,":method":"CONNECT",":authority":e},n=await pp.request(r.url,r,s),i=await gp(n);return[n,i,""]}};Ba.exports=Xs});var Wa=q((L_,Va)=>{"use strict";var _p=$("http"),bp=$("https"),wp=Ys(),xp=vr(),vp=t=>new Promise((e,r)=>{let s=(n,i,o)=>{i.unshift(o),t.off("error",r),e([i,n.statusCode,n.statusMessage])};t.once("error",r),t.once("connect",s)}),Er=class extends wp{async _getProxyStream(e){let{proxyOptions:r}=this,{url:s,headers:n}=this.proxyOptions,o=(s.protocol==="https:"?bp:_p).request({...r,hostname:s.hostname,port:s.port,path:e,headers:{...xp(this),...n,host:e},method:"CONNECT"}).end();return vp(o)}};Va.exports={Http2OverHttp:Er,Http2OverHttps:Er}});var Za=q((U_,Ga)=>{"use strict";var Ep=$("http2"),{Agent:kp,globalAgent:Tp}=He(),en=Bs(),Sp=Ls(),Ap=Ca(),{HttpOverHttp2:Rp,HttpsOverHttp2:Cp}=Ma(),Op=Fa(),{Http2OverHttp:Pp,Http2OverHttps:jp}=Wa(),Np=Us(),Ip=Ds(),qp=(t,e,r)=>new en(t,e,r),$p=(t,e,r)=>{let s=new en(t,e,r);return s.end(),s};Ga.exports={...Ep,ClientRequest:en,IncomingMessage:Sp,Agent:kp,globalAgent:Tp,request:qp,get:$p,auto:Ap,proxies:{HttpOverHttp2:Rp,HttpsOverHttp2:Cp,Http2OverHttp2:Op,Http2OverHttp:Pp,Http2OverHttps:jp},validateHeaderName:Np,validateHeaderValue:Ip}});var vc=q((aw,Wt)=>{"use strict";var Nr=function(){};Nr.prototype=Object.create(null);var Pr=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,jr=/\\([\v\u0020-\u00ff])/gu,bc=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,Be={type:"",parameters:new Nr};Object.freeze(Be.parameters);Object.freeze(Be);function wc(t){if(typeof t!="string")throw new TypeError("argument header is required and must be a string");let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(bc.test(r)===!1)throw new TypeError("invalid media type");let s={type:r.toLowerCase(),parameters:new Nr};if(e===-1)return s;let n,i,o;for(Pr.lastIndex=e;i=Pr.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,n=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),jr.test(o)&&(o=o.replace(jr,"$1"))),s.parameters[n]=o}if(e!==t.length)throw new TypeError("invalid parameter format");return s}function xc(t){if(typeof t!="string")return Be;let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(bc.test(r)===!1)return Be;let s={type:r.toLowerCase(),parameters:new Nr};if(e===-1)return s;let n,i,o;for(Pr.lastIndex=e;i=Pr.exec(t);){if(i.index!==e)return Be;e+=i[0].length,n=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),jr.test(o)&&(o=o.replace(jr,"$1"))),s.parameters[n]=o}return e!==t.length?Be:s}Wt.exports.default={parse:wc,safeParse:xc};Wt.exports.parse=wc;Wt.exports.safeParse=xc;Wt.exports.defaultContentType=Be});import pn from"node:fs";import Qm from"node:path";var _n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Vc(t){return _n.includes(t)}var bn=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",..._n];function Wc(t){return bn.includes(t)}var wn=["null","undefined","string","number","bigint","boolean","symbol"];function Gc(t){return wn.includes(t)}var sy=["positive number","negative number","Class","string with a number","null or undefined","Iterable","AsyncIterable","native Promise","EnumCase","string with a URL","truthy","falsy","primitive","integer","plain object","TypedArray","array-like","tuple-like","Node.js Stream","infinite number","empty array","non-empty array","empty string","empty string or whitespace","non-empty string","non-empty string and not whitespace","empty object","non-empty object","empty set","non-empty set","empty map","non-empty map","PropertyKey","even integer","odd integer","T","in range","predicate returns truthy for any value","predicate returns truthy for all values","valid Date","valid length","whitespace string",...bn,...wn],I=t=>{let e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&Br(t))return"HTMLElement";if(Wc(e))return e};function yn(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(Qt(t))return"Observable";if(X(t))return"Array";if(gt(t))return"Buffer";let e=I(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}function Zc(t){return H(t?.then)&&H(t?.catch)}var Ur=Object.assign(yn,{all:vn,any:Dr,array:X,arrayBuffer:En,arrayLike:kn,asyncFunction:Tn,asyncGenerator:Sn,asyncGeneratorFunction:An,asyncIterable:Hr,bigint:Rn,bigInt64Array:Cn,bigUint64Array:On,blob:Pn,boolean:jn,boundFunction:Nn,buffer:gt,class:In,dataView:qn,date:Mr,detect:yn,directInstanceOf:$n,emptyArray:Ln,emptyMap:Un,emptyObject:Dn,emptySet:Hn,emptyString:zr,emptyStringOrWhitespace:Kt,enumCase:Mn,error:zn,evenInteger:Bn,falsy:Fn,float32Array:Vn,float64Array:Wn,formData:Gn,function:H,generator:Zn,generatorFunction:Jn,htmlElement:Br,infinite:Kn,inRange:Qn,int16Array:Yn,int32Array:Xn,int8Array:ei,integer:Fr,iterable:Vr,map:Ge,nan:Wr,nativePromise:Gr,negativeNumber:ti,nodeStream:ri,nonEmptyArray:si,nonEmptyMap:ni,nonEmptyObject:ii,nonEmptySet:oi,nonEmptyString:ai,nonEmptyStringAndNotWhitespace:ci,null:_t,nullOrUndefined:Zr,number:Ze,numericString:ui,object:Je,observable:Qt,oddInteger:di,plainObject:Jr,positiveNumber:hi,primitive:fi,promise:li,propertyKey:pi,regExp:mi,safeInteger:Kr,set:Ke,sharedArrayBuffer:yi,string:te,symbol:Qr,truthy:gi,tupleLike:_i,typedArray:bi,uint16Array:wi,uint32Array:xi,uint8Array:vi,uint8ClampedArray:Ei,undefined:Yr,urlInstance:ki,urlSearchParams:Ti,urlString:Si,validDate:Ai,validLength:Xr,weakMap:Ri,weakRef:Ci,weakSet:Oi,whitespaceString:es});function xn(t){return e=>Fr(e)&&Math.abs(e%2)===t}function vn(t,...e){return Pi(Array.prototype.every,t,e)}function Dr(t,...e){return(X(t)?t:[t]).some(s=>Pi(Array.prototype.some,s,e))}function X(t,e){return Array.isArray(t)?H(e)?t.every(r=>e(r)):!0:!1}function En(t){return I(t)==="ArrayBuffer"}function kn(t){return!Zr(t)&&!H(t)&&Xr(t.length)}function Tn(t){return I(t)==="AsyncFunction"}function Sn(t){return Hr(t)&&H(t.next)&&H(t.throw)}function An(t){return I(t)==="AsyncGeneratorFunction"}function Hr(t){return H(t?.[Symbol.asyncIterator])}function Rn(t){return typeof t=="bigint"}function Cn(t){return I(t)==="BigInt64Array"}function On(t){return I(t)==="BigUint64Array"}function Pn(t){return I(t)==="Blob"}function jn(t){return t===!0||t===!1}function Nn(t){return H(t)&&!Object.hasOwn(t,"prototype")}function gt(t){return t?.constructor?.isBuffer?.(t)??!1}function In(t){return H(t)&&t.toString().startsWith("class ")}function qn(t){return I(t)==="DataView"}function Mr(t){return I(t)==="Date"}function $n(t,e){return t==null?!1:Object.getPrototypeOf(t)===e.prototype}function Ln(t){return X(t)&&t.length===0}function Un(t){return Ge(t)&&t.size===0}function Dn(t){return Je(t)&&!Ge(t)&&!Ke(t)&&Object.keys(t).length===0}function Hn(t){return Ke(t)&&t.size===0}function zr(t){return te(t)&&t.length===0}function Kt(t){return zr(t)||es(t)}function Mn(t,e){return Object.values(e).includes(t)}function zn(t){return I(t)==="Error"}function Bn(t){return xn(0)(t)}function Fn(t){return!t}function Vn(t){return I(t)==="Float32Array"}function Wn(t){return I(t)==="Float64Array"}function Gn(t){return I(t)==="FormData"}function H(t){return typeof t=="function"}function Zn(t){return Vr(t)&&H(t?.next)&&H(t?.throw)}function Jn(t){return I(t)==="GeneratorFunction"}var Jc=1,Kc=["innerHTML","ownerDocument","style","attributes","nodeValue"];function Br(t){return Je(t)&&t.nodeType===Jc&&te(t.nodeName)&&!Jr(t)&&Kc.every(e=>e in t)}function Kn(t){return t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY}function Qn(t,e){if(Ze(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(X(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)}function Yn(t){return I(t)==="Int16Array"}function Xn(t){return I(t)==="Int32Array"}function ei(t){return I(t)==="Int8Array"}function Fr(t){return Number.isInteger(t)}function Vr(t){return H(t?.[Symbol.iterator])}function Ge(t){return I(t)==="Map"}function Wr(t){return Number.isNaN(t)}function Gr(t){return I(t)==="Promise"}function ti(t){return Ze(t)&&t<0}function ri(t){return Je(t)&&H(t.pipe)&&!Qt(t)}function si(t){return X(t)&&t.length>0}function ni(t){return Ge(t)&&t.size>0}function ii(t){return Je(t)&&!Ge(t)&&!Ke(t)&&Object.keys(t).length>0}function oi(t){return Ke(t)&&t.size>0}function ai(t){return te(t)&&t.length>0}function ci(t){return te(t)&&!Kt(t)}function _t(t){return t===null}function Zr(t){return _t(t)||Yr(t)}function Ze(t){return typeof t=="number"&&!Number.isNaN(t)}function ui(t){return te(t)&&!Kt(t)&&!Number.isNaN(Number(t))}function Je(t){return!_t(t)&&(typeof t=="object"||H(t))}function Qt(t){return t?Symbol.observable!==void 0&&t===t[Symbol.observable]?.()||t===t["@@observable"]?.():!1}function di(t){return xn(1)(t)}function Jr(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function hi(t){return Ze(t)&&t>0}function fi(t){return _t(t)||Gc(typeof t)}function li(t){return Gr(t)||Zc(t)}function pi(t){return Dr([te,Ze,Qr],t)}function mi(t){return I(t)==="RegExp"}function Kr(t){return Number.isSafeInteger(t)}function Ke(t){return I(t)==="Set"}function yi(t){return I(t)==="SharedArrayBuffer"}function te(t){return typeof t=="string"}function Qr(t){return typeof t=="symbol"}function gi(t){return!!t}function _i(t,e){return X(e)&&X(t)&&e.length===t.length?e.every((r,s)=>r(t[s])):!1}function bi(t){return Vc(I(t))}function wi(t){return I(t)==="Uint16Array"}function xi(t){return I(t)==="Uint32Array"}function vi(t){return I(t)==="Uint8Array"}function Ei(t){return I(t)==="Uint8ClampedArray"}function Yr(t){return t===void 0}function ki(t){return I(t)==="URL"}function Ti(t){return I(t)==="URLSearchParams"}function Si(t){if(!te(t))return!1;try{return new URL(t),!0}catch{return!1}}function Ai(t){return Mr(t)&&!Wr(Number(t))}function Xr(t){return Kr(t)&&t>=0}function Ri(t){return I(t)==="WeakMap"}function Ci(t){return I(t)==="WeakRef"}function Oi(t){return I(t)==="WeakSet"}function es(t){return te(t)&&/^\s+$/.test(t)}function Pi(t,e,r){if(!H(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)}function g(t,e){return`Expected value which is \`${t}\`, received value of type \`${Ur(e)}\`.`}function gn(t){return Array.from(new Set(t))}var Qc=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),Yc=new Intl.ListFormat("en",{style:"long",type:"disjunction"});function ji(t,e){let r=gn((X(t)?t:[t]).map(n=>`\`${n}\``)),s=gn(e.map(n=>`\`${Ur(n)}\``));return`Expected values which are ${Yc.format(r)}. Received values of type${s.length>1?"s":""} ${Qc.format(s)}.`}var l={all:tu,any:ru,array:su,arrayBuffer:nu,arrayLike:iu,asyncFunction:ou,asyncGenerator:au,asyncGeneratorFunction:cu,asyncIterable:uu,bigint:du,bigInt64Array:hu,bigUint64Array:fu,blob:lu,boolean:pu,boundFunction:mu,buffer:yu,class:gu,dataView:_u,date:bu,directInstanceOf:wu,emptyArray:xu,emptyMap:vu,emptyObject:Eu,emptySet:ku,emptyString:Tu,emptyStringOrWhitespace:Su,enumCase:Au,error:Ru,evenInteger:Cu,falsy:Ou,float32Array:Pu,float64Array:ju,formData:Nu,function:Iu,generator:qu,generatorFunction:$u,htmlElement:Lu,infinite:Uu,inRange:Du,int16Array:Hu,int32Array:Mu,int8Array:zu,integer:Bu,iterable:Fu,map:Vu,nan:Wu,nativePromise:Gu,negativeNumber:Zu,nodeStream:Ju,nonEmptyArray:Ku,nonEmptyMap:Qu,nonEmptyObject:Yu,nonEmptySet:Xu,nonEmptyString:ed,nonEmptyStringAndNotWhitespace:td,null:rd,nullOrUndefined:sd,number:nd,numericString:id,object:od,observable:ad,oddInteger:cd,plainObject:ud,positiveNumber:dd,primitive:hd,promise:fd,propertyKey:ld,regExp:pd,safeInteger:md,set:yd,sharedArrayBuffer:gd,string:_d,symbol:bd,truthy:wd,tupleLike:xd,typedArray:vd,uint16Array:Ed,uint32Array:kd,uint8Array:Td,uint8ClampedArray:Sd,undefined:Ad,urlInstance:Rd,urlSearchParams:Cd,urlString:Od,validDate:Pd,validLength:jd,weakMap:Nd,weakRef:Id,weakSet:qd,whitespaceString:$d},ts={isArray:"Array",isArrayBuffer:"ArrayBuffer",isArrayLike:"array-like",isAsyncFunction:"AsyncFunction",isAsyncGenerator:"AsyncGenerator",isAsyncGeneratorFunction:"AsyncGeneratorFunction",isAsyncIterable:"AsyncIterable",isBigint:"bigint",isBigInt64Array:"BigInt64Array",isBigUint64Array:"BigUint64Array",isBlob:"Blob",isBoolean:"boolean",isBoundFunction:"Function",isBuffer:"Buffer",isClass:"Class",isDataView:"DataView",isDate:"Date",isDirectInstanceOf:"T",isEmptyArray:"empty array",isEmptyMap:"empty map",isEmptyObject:"empty object",isEmptySet:"empty set",isEmptyString:"empty string",isEmptyStringOrWhitespace:"empty string or whitespace",isEnumCase:"EnumCase",isError:"Error",isEvenInteger:"even integer",isFalsy:"falsy",isFloat32Array:"Float32Array",isFloat64Array:"Float64Array",isFormData:"FormData",isFunction:"Function",isGenerator:"Generator",isGeneratorFunction:"GeneratorFunction",isHtmlElement:"HTMLElement",isInfinite:"infinite number",isInRange:"in range",isInt16Array:"Int16Array",isInt32Array:"Int32Array",isInt8Array:"Int8Array",isInteger:"integer",isIterable:"Iterable",isMap:"Map",isNan:"NaN",isNativePromise:"native Promise",isNegativeNumber:"negative number",isNodeStream:"Node.js Stream",isNonEmptyArray:"non-empty array",isNonEmptyMap:"non-empty map",isNonEmptyObject:"non-empty object",isNonEmptySet:"non-empty set",isNonEmptyString:"non-empty string",isNonEmptyStringAndNotWhitespace:"non-empty string and not whitespace",isNull:"null",isNullOrUndefined:"null or undefined",isNumber:"number",isNumericString:"string with a number",isObject:"Object",isObservable:"Observable",isOddInteger:"odd integer",isPlainObject:"plain object",isPositiveNumber:"positive number",isPrimitive:"primitive",isPromise:"Promise",isPropertyKey:"PropertyKey",isRegExp:"RegExp",isSafeInteger:"integer",isSet:"Set",isSharedArrayBuffer:"SharedArrayBuffer",isString:"string",isSymbol:"symbol",isTruthy:"truthy",isTupleLike:"tuple-like",isTypedArray:"TypedArray",isUint16Array:"Uint16Array",isUint32Array:"Uint32Array",isUint8Array:"Uint8Array",isUint8ClampedArray:"Uint8ClampedArray",isUndefined:"undefined",isUrlInstance:"URL",isUrlSearchParams:"URLSearchParams",isUrlString:"string with a URL",isValidDate:"valid Date",isValidLength:"valid length",isWeakMap:"WeakMap",isWeakRef:"WeakRef",isWeakSet:"WeakSet",isWhitespaceString:"whitespace string"};function Xc(t){return Object.keys(t)}var eu=Xc(ts);function Ni(t){return eu.includes(t)}function tu(t,...e){if(!vn(t,...e)){let r=Ni(t.name)?ts[t.name]:"predicate returns truthy for all values";throw new TypeError(ji(r,e))}}function ru(t,...e){if(!Dr(t,...e)){let s=(X(t)?t:[t]).map(n=>Ni(n.name)?ts[n.name]:"predicate returns truthy for any value");throw new TypeError(ji(s,e))}}function su(t,e,r){if(!X(t))throw new TypeError(r??g("Array",t));if(e)for(let s of t)e(s,r)}function nu(t,e){if(!En(t))throw new TypeError(e??g("ArrayBuffer",t))}function iu(t,e){if(!kn(t))throw new TypeError(e??g("array-like",t))}function ou(t,e){if(!Tn(t))throw new TypeError(e??g("AsyncFunction",t))}function au(t,e){if(!Sn(t))throw new TypeError(e??g("AsyncGenerator",t))}function cu(t,e){if(!An(t))throw new TypeError(e??g("AsyncGeneratorFunction",t))}function uu(t,e){if(!Hr(t))throw new TypeError(e??g("AsyncIterable",t))}function du(t,e){if(!Rn(t))throw new TypeError(e??g("bigint",t))}function hu(t,e){if(!Cn(t))throw new TypeError(e??g("BigInt64Array",t))}function fu(t,e){if(!On(t))throw new TypeError(e??g("BigUint64Array",t))}function lu(t,e){if(!Pn(t))throw new TypeError(e??g("Blob",t))}function pu(t,e){if(!jn(t))throw new TypeError(e??g("boolean",t))}function mu(t,e){if(!Nn(t))throw new TypeError(e??g("Function",t))}function yu(t,e){if(!gt(t))throw new TypeError(e??g("Buffer",t))}function gu(t,e){if(!In(t))throw new TypeError(e??g("Class",t))}function _u(t,e){if(!qn(t))throw new TypeError(e??g("DataView",t))}function bu(t,e){if(!Mr(t))throw new TypeError(e??g("Date",t))}function wu(t,e,r){if(!$n(t,e))throw new TypeError(r??g("T",t))}function xu(t,e){if(!Ln(t))throw new TypeError(e??g("empty array",t))}function vu(t,e){if(!Un(t))throw new TypeError(e??g("empty map",t))}function Eu(t,e){if(!Dn(t))throw new TypeError(e??g("empty object",t))}function ku(t,e){if(!Hn(t))throw new TypeError(e??g("empty set",t))}function Tu(t,e){if(!zr(t))throw new TypeError(e??g("empty string",t))}function Su(t,e){if(!Kt(t))throw new TypeError(e??g("empty string or whitespace",t))}function Au(t,e,r){if(!Mn(t,e))throw new TypeError(r??g("EnumCase",t))}function Ru(t,e){if(!zn(t))throw new TypeError(e??g("Error",t))}function Cu(t,e){if(!Bn(t))throw new TypeError(e??g("even integer",t))}function Ou(t,e){if(!Fn(t))throw new TypeError(e??g("falsy",t))}function Pu(t,e){if(!Vn(t))throw new TypeError(e??g("Float32Array",t))}function ju(t,e){if(!Wn(t))throw new TypeError(e??g("Float64Array",t))}function Nu(t,e){if(!Gn(t))throw new TypeError(e??g("FormData",t))}function Iu(t,e){if(!H(t))throw new TypeError(e??g("Function",t))}function qu(t,e){if(!Zn(t))throw new TypeError(e??g("Generator",t))}function $u(t,e){if(!Jn(t))throw new TypeError(e??g("GeneratorFunction",t))}function Lu(t,e){if(!Br(t))throw new TypeError(e??g("HTMLElement",t))}function Uu(t,e){if(!Kn(t))throw new TypeError(e??g("infinite number",t))}function Du(t,e,r){if(!Qn(t,e))throw new TypeError(r??g("in range",t))}function Hu(t,e){if(!Yn(t))throw new TypeError(e??g("Int16Array",t))}function Mu(t,e){if(!Xn(t))throw new TypeError(e??g("Int32Array",t))}function zu(t,e){if(!ei(t))throw new TypeError(e??g("Int8Array",t))}function Bu(t,e){if(!Fr(t))throw new TypeError(e??g("integer",t))}function Fu(t,e){if(!Vr(t))throw new TypeError(e??g("Iterable",t))}function Vu(t,e){if(!Ge(t))throw new TypeError(e??g("Map",t))}function Wu(t,e){if(!Wr(t))throw new TypeError(e??g("NaN",t))}function Gu(t,e){if(!Gr(t))throw new TypeError(e??g("native Promise",t))}function Zu(t,e){if(!ti(t))throw new TypeError(e??g("negative number",t))}function Ju(t,e){if(!ri(t))throw new TypeError(e??g("Node.js Stream",t))}function Ku(t,e){if(!si(t))throw new TypeError(e??g("non-empty array",t))}function Qu(t,e){if(!ni(t))throw new TypeError(e??g("non-empty map",t))}function Yu(t,e){if(!ii(t))throw new TypeError(e??g("non-empty object",t))}function Xu(t,e){if(!oi(t))throw new TypeError(e??g("non-empty set",t))}function ed(t,e){if(!ai(t))throw new TypeError(e??g("non-empty string",t))}function td(t,e){if(!ci(t))throw new TypeError(e??g("non-empty string and not whitespace",t))}function rd(t,e){if(!_t(t))throw new TypeError(e??g("null",t))}function sd(t,e){if(!Zr(t))throw new TypeError(e??g("null or undefined",t))}function nd(t,e){if(!Ze(t))throw new TypeError(e??g("number",t))}function id(t,e){if(!ui(t))throw new TypeError(e??g("string with a number",t))}function od(t,e){if(!Je(t))throw new TypeError(e??g("Object",t))}function ad(t,e){if(!Qt(t))throw new TypeError(e??g("Observable",t))}function cd(t,e){if(!di(t))throw new TypeError(e??g("odd integer",t))}function ud(t,e){if(!Jr(t))throw new TypeError(e??g("plain object",t))}function dd(t,e){if(!hi(t))throw new TypeError(e??g("positive number",t))}function hd(t,e){if(!fi(t))throw new TypeError(e??g("primitive",t))}function fd(t,e){if(!li(t))throw new TypeError(e??g("Promise",t))}function ld(t,e){if(!pi(t))throw new TypeError(e??g("PropertyKey",t))}function pd(t,e){if(!mi(t))throw new TypeError(e??g("RegExp",t))}function md(t,e){if(!Kr(t))throw new TypeError(e??g("integer",t))}function yd(t,e){if(!Ke(t))throw new TypeError(e??g("Set",t))}function gd(t,e){if(!yi(t))throw new TypeError(e??g("SharedArrayBuffer",t))}function _d(t,e){if(!te(t))throw new TypeError(e??g("string",t))}function bd(t,e){if(!Qr(t))throw new TypeError(e??g("symbol",t))}function wd(t,e){if(!gi(t))throw new TypeError(e??g("truthy",t))}function xd(t,e,r){if(!_i(t,e))throw new TypeError(r??g("tuple-like",t))}function vd(t,e){if(!bi(t))throw new TypeError(e??g("TypedArray",t))}function Ed(t,e){if(!wi(t))throw new TypeError(e??g("Uint16Array",t))}function kd(t,e){if(!xi(t))throw new TypeError(e??g("Uint32Array",t))}function Td(t,e){if(!vi(t))throw new TypeError(e??g("Uint8Array",t))}function Sd(t,e){if(!Ei(t))throw new TypeError(e??g("Uint8ClampedArray",t))}function Ad(t,e){if(!Yr(t))throw new TypeError(e??g("undefined",t))}function Rd(t,e){if(!ki(t))throw new TypeError(e??g("URL",t))}function Cd(t,e){if(!Ti(t))throw new TypeError(e??g("URLSearchParams",t))}function Od(t,e){if(!Si(t))throw new TypeError(e??g("string with a URL",t))}function Pd(t,e){if(!Ai(t))throw new TypeError(e??g("valid Date",t))}function jd(t,e){if(!Xr(t))throw new TypeError(e??g("valid length",t))}function Nd(t,e){if(!Ri(t))throw new TypeError(e??g("WeakMap",t))}function Id(t,e){if(!Ci(t))throw new TypeError(e??g("WeakRef",t))}function qd(t,e){if(!Oi(t))throw new TypeError(e??g("WeakSet",t))}function $d(t,e){if(!es(t))throw new TypeError(e??g("whitespace string",t))}var u=Ur;var S={};Bc(S,{BRAND:()=>ch,DIRTY:()=>Ee,EMPTY_PATH:()=>Hd,INVALID:()=>A,NEVER:()=>Wh,OK:()=>B,ParseStatus:()=>M,Schema:()=>O,ZodAny:()=>ge,ZodArray:()=>ue,ZodBigInt:()=>Te,ZodBoolean:()=>Se,ZodBranded:()=>wt,ZodCatch:()=>Le,ZodDate:()=>Ae,ZodDefault:()=>$e,ZodDiscriminatedUnion:()=>er,ZodEffects:()=>Q,ZodEnum:()=>Ie,ZodError:()=>G,ZodFirstPartyTypeKind:()=>R,ZodFunction:()=>rr,ZodIntersection:()=>Pe,ZodIssueCode:()=>p,ZodLazy:()=>je,ZodLiteral:()=>Ne,ZodMap:()=>rt,ZodNaN:()=>nt,ZodNativeEnum:()=>qe,ZodNever:()=>ee,ZodNull:()=>Ce,ZodNullable:()=>ne,ZodNumber:()=>ke,ZodObject:()=>Z,ZodOptional:()=>J,ZodParsedType:()=>w,ZodPipeline:()=>xt,ZodPromise:()=>_e,ZodReadonly:()=>Ue,ZodRecord:()=>tr,ZodSchema:()=>O,ZodSet:()=>st,ZodString:()=>ye,ZodSymbol:()=>et,ZodTransformer:()=>Q,ZodTuple:()=>se,ZodType:()=>O,ZodUndefined:()=>Re,ZodUnion:()=>Oe,ZodUnknown:()=>ce,ZodVoid:()=>tt,addIssueToContext:()=>_,any:()=>gh,array:()=>xh,bigint:()=>fh,boolean:()=>Fi,coerce:()=>Vh,custom:()=>Mi,date:()=>lh,datetimeRegex:()=>Di,defaultErrorMap:()=>oe,discriminatedUnion:()=>Th,effect:()=>Lh,enum:()=>Ih,function:()=>Ph,getErrorMap:()=>Qe,getParsedType:()=>re,instanceof:()=>dh,intersection:()=>Sh,isAborted:()=>Yt,isAsync:()=>Ye,isDirty:()=>Xt,isValid:()=>me,late:()=>uh,lazy:()=>jh,literal:()=>Nh,makeIssue:()=>bt,map:()=>Ch,nan:()=>hh,nativeEnum:()=>qh,never:()=>bh,null:()=>yh,nullable:()=>Dh,number:()=>Bi,object:()=>vh,objectUtil:()=>rs,oboolean:()=>Fh,onumber:()=>Bh,optional:()=>Uh,ostring:()=>zh,pipeline:()=>Mh,preprocess:()=>Hh,promise:()=>$h,quotelessJson:()=>Ld,record:()=>Rh,set:()=>Oh,setErrorMap:()=>Dd,strictObject:()=>Eh,string:()=>zi,symbol:()=>ph,transformer:()=>Lh,tuple:()=>Ah,undefined:()=>mh,union:()=>kh,unknown:()=>_h,util:()=>j,void:()=>wh});var j;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let o of n)i[o]=o;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),o={};for(let a of i)o[a]=n[a];return t.objectValues(o)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push(o);return i},t.find=(n,i)=>{for(let o of n)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(j||(j={}));var rs;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(rs||(rs={}));var w=j.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),re=t=>{switch(typeof t){case"undefined":return w.undefined;case"string":return w.string;case"number":return Number.isNaN(t)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(t)?w.array:t===null?w.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?w.promise:typeof Map<"u"&&t instanceof Map?w.map:typeof Set<"u"&&t instanceof Set?w.set:typeof Date<"u"&&t instanceof Date?w.date:w.object;default:return w.unknown}};var p=j.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ld=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),G=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let a=s,c=0;for(;c<o.path.length;){let d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(r(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return n(this),s}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,j.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},s=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};G.create=t=>new G(t);var Ud=(t,e)=>{let r;switch(t.code){case p.invalid_type:t.received===w.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,j.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:r=`Unrecognized key(s) in object: ${j.joinValues(t.keys,", ")}`;break;case p.invalid_union:r="Invalid input";break;case p.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${j.joinValues(t.options)}`;break;case p.invalid_enum_value:r=`Invalid enum value. Expected ${j.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:r="Invalid function arguments";break;case p.invalid_return_type:r="Invalid function return type";break;case p.invalid_date:r="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:j.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case p.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case p.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case p.custom:r="Invalid input";break;case p.invalid_intersection_types:r="Intersection results could not be merged";break;case p.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:r="Number must be finite";break;default:r=e.defaultError,j.assertNever(t)}return{message:r}},oe=Ud;var Ii=oe;function Dd(t){Ii=t}function Qe(){return Ii}var bt=t=>{let{data:e,path:r,errorMaps:s,issueData:n}=t,i=[...r,...n.path||[]],o={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let a="",c=s.filter(d=>!!d).slice().reverse();for(let d of c)a=d(o,{data:e,defaultError:a}).message;return{...n,path:i,message:a}},Hd=[];function _(t,e){let r=Qe(),s=bt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===oe?void 0:oe].filter(n=>!!n)});t.common.issues.push(s)}var M=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let s=[];for(let n of r){if(n.status==="aborted")return A;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){let s=[];for(let n of r){let i=await n.key,o=await n.value;s.push({key:i,value:o})}return t.mergeObjectSync(e,s)}static mergeObjectSync(e,r){let s={};for(let n of r){let{key:i,value:o}=n;if(i.status==="aborted"||o.status==="aborted")return A;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}},A=Object.freeze({status:"aborted"}),Ee=t=>({status:"dirty",value:t}),B=t=>({status:"valid",value:t}),Yt=t=>t.status==="aborted",Xt=t=>t.status==="dirty",me=t=>t.status==="valid",Ye=t=>typeof Promise<"u"&&t instanceof Promise;var v;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(v||(v={}));var K=class{constructor(e,r,s,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},qi=(t,e)=>{if(me(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new G(t.common.issues);return this._error=r,this._error}}};function C(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:n}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(o,a)=>{let{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??s??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:n}}var O=class{get description(){return this._def.description}_getType(e){return re(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new M,ctx:{common:e.parent.common,data:e.data,parsedType:re(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ye(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)},n=this._parseSync({data:e,path:s.path,parent:s});return qi(s,n)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:r});return me(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>me(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){let s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:re(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Ye(n)?n:Promise.resolve(n));return qi(s,i)}refine(e,r){let s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let o=e(n),a=()=>i.addIssue({code:p.custom,...s(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(e){return new Q({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return J.create(this,this._def)}nullable(){return ne.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ue.create(this)}promise(){return _e.create(this,this._def)}or(e){return Oe.create([this,e],this._def)}and(e){return Pe.create(this,e,this._def)}transform(e){return new Q({...C(this._def),schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new $e({...C(this._def),innerType:this,defaultValue:r,typeName:R.ZodDefault})}brand(){return new wt({typeName:R.ZodBranded,type:this,...C(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Le({...C(this._def),innerType:this,catchValue:r,typeName:R.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return xt.create(this,e)}readonly(){return Ue.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Md=/^c[^\s-]{8,}$/i,zd=/^[0-9a-z]+$/,Bd=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fd=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vd=/^[a-z0-9_-]{21}$/i,Wd=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Gd=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Jd="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ss,Kd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,th=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Li="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rh=new RegExp(`^${Li}$`);function Ui(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function sh(t){return new RegExp(`^${Ui(t)}$`)}function Di(t){let e=`${Li}T${Ui(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function nh(t,e){return!!((e==="v4"||!e)&&Kd.test(t)||(e==="v6"||!e)&&Yd.test(t))}function ih(t,e){if(!Wd.test(t))return!1;try{let[r]=t.split("."),s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function oh(t,e){return!!((e==="v4"||!e)&&Qd.test(t)||(e==="v6"||!e)&&Xd.test(t))}var ye=class t extends O{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){let i=this._getOrReturnCtx(e);return _(i,{code:p.invalid_type,expected:w.string,received:i.parsedType}),A}let s=new M,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(n=this._getOrReturnCtx(e,n),o?_(n,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&_(n,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")Zd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"email",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")ss||(ss=new RegExp(Jd,"u")),ss.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"emoji",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Fd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"uuid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")Vd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"nanoid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Md.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")zd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid2",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Bd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ulid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),_(n,{validation:"url",code:p.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"regex",code:p.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Di(i).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?rh.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?sh(i).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:p.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?Gd.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"duration",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?nh(e.data,i.version)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ip",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?ih(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"jwt",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?oh(e.data,i.version)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cidr",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?eh.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"base64",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?th.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"base64url",code:p.invalid_string,message:i.message}),s.dirty()):j.assertNever(i);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(n=>e.test(n),{validation:r,code:p.invalid_string,...v.errToObj(s)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...v.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...v.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...v.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...v.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...v.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...v.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...v.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...v.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...v.errToObj(r)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ye.create=t=>new ye({checks:[],typeName:R.ZodString,coerce:t?.coerce??!1,...C(t)});function ah(t,e){let r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=r>s?r:s,i=Number.parseInt(t.toFixed(n).replace(".","")),o=Number.parseInt(e.toFixed(n).replace(".",""));return i%o/10**n}var ke=class t extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){let i=this._getOrReturnCtx(e);return _(i,{code:p.invalid_type,expected:w.number,received:i.parsedType}),A}let s,n=new M;for(let i of this._def.checks)i.kind==="int"?j.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?ah(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:p.not_finite,message:i.message}),n.dirty()):j.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,v.toString(r))}gt(e,r){return this.setLimit("min",e,!1,v.toString(r))}lte(e,r){return this.setLimit("max",e,!0,v.toString(r))}lt(e,r){return this.setLimit("max",e,!1,v.toString(r))}setLimit(e,r,s,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:v.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&j.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ke.create=t=>new ke({checks:[],typeName:R.ZodNumber,coerce:t?.coerce||!1,...C(t)});var Te=class t extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==w.bigint)return this._getInvalidInput(e);let s,n=new M;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),_(s,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):j.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return _(r,{code:p.invalid_type,expected:w.bigint,received:r.parsedType}),A}gte(e,r){return this.setLimit("min",e,!0,v.toString(r))}gt(e,r){return this.setLimit("min",e,!1,v.toString(r))}lte(e,r){return this.setLimit("max",e,!0,v.toString(r))}lt(e,r){return this.setLimit("max",e,!1,v.toString(r))}setLimit(e,r,s,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:v.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Te.create=t=>new Te({checks:[],typeName:R.ZodBigInt,coerce:t?.coerce??!1,...C(t)});var Se=class extends O{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==w.boolean){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.boolean,received:s.parsedType}),A}return B(e.data)}};Se.create=t=>new Se({typeName:R.ZodBoolean,coerce:t?.coerce||!1,...C(t)});var Ae=class t extends O{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){let i=this._getOrReturnCtx(e);return _(i,{code:p.invalid_type,expected:w.date,received:i.parsedType}),A}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return _(i,{code:p.invalid_date}),A}let s=new M,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):j.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ae.create=t=>new Ae({checks:[],coerce:t?.coerce||!1,typeName:R.ZodDate,...C(t)});var et=class extends O{_parse(e){if(this._getType(e)!==w.symbol){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.symbol,received:s.parsedType}),A}return B(e.data)}};et.create=t=>new et({typeName:R.ZodSymbol,...C(t)});var Re=class extends O{_parse(e){if(this._getType(e)!==w.undefined){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.undefined,received:s.parsedType}),A}return B(e.data)}};Re.create=t=>new Re({typeName:R.ZodUndefined,...C(t)});var Ce=class extends O{_parse(e){if(this._getType(e)!==w.null){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.null,received:s.parsedType}),A}return B(e.data)}};Ce.create=t=>new Ce({typeName:R.ZodNull,...C(t)});var ge=class extends O{constructor(){super(...arguments),this._any=!0}_parse(e){return B(e.data)}};ge.create=t=>new ge({typeName:R.ZodAny,...C(t)});var ce=class extends O{constructor(){super(...arguments),this._unknown=!0}_parse(e){return B(e.data)}};ce.create=t=>new ce({typeName:R.ZodUnknown,...C(t)});var ee=class extends O{_parse(e){let r=this._getOrReturnCtx(e);return _(r,{code:p.invalid_type,expected:w.never,received:r.parsedType}),A}};ee.create=t=>new ee({typeName:R.ZodNever,...C(t)});var tt=class extends O{_parse(e){if(this._getType(e)!==w.undefined){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.void,received:s.parsedType}),A}return B(e.data)}};tt.create=t=>new tt({typeName:R.ZodVoid,...C(t)});var ue=class t extends O{_parse(e){let{ctx:r,status:s}=this._processInputParams(e),n=this._def;if(r.parsedType!==w.array)return _(r,{code:p.invalid_type,expected:w.array,received:r.parsedType}),A;if(n.exactLength!==null){let o=r.data.length>n.exactLength.value,a=r.data.length<n.exactLength.value;(o||a)&&(_(r,{code:o?p.too_big:p.too_small,minimum:a?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(_(r,{code:p.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(_(r,{code:p.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>n.type._parseAsync(new K(r,o,r.path,a)))).then(o=>M.mergeArray(s,o));let i=[...r.data].map((o,a)=>n.type._parseSync(new K(r,o,r.path,a)));return M.mergeArray(s,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:v.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:v.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:v.toString(r)}})}nonempty(e){return this.min(1,e)}};ue.create=(t,e)=>new ue({type:t,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray,...C(e)});function Xe(t){if(t instanceof Z){let e={};for(let r in t.shape){let s=t.shape[r];e[r]=J.create(Xe(s))}return new Z({...t._def,shape:()=>e})}else return t instanceof ue?new ue({...t._def,type:Xe(t.element)}):t instanceof J?J.create(Xe(t.unwrap())):t instanceof ne?ne.create(Xe(t.unwrap())):t instanceof se?se.create(t.items.map(e=>Xe(e))):t}var Z=class t extends O{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=j.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==w.object){let d=this._getOrReturnCtx(e);return _(d,{code:p.invalid_type,expected:w.object,received:d.parsedType}),A}let{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ee&&this._def.unknownKeys==="strip"))for(let d in n.data)o.includes(d)||a.push(d);let c=[];for(let d of o){let h=i[d],y=n.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new K(n,y,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof ee){let d=this._def.unknownKeys;if(d==="passthrough")for(let h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(d==="strict")a.length>0&&(_(n,{code:p.unrecognized_keys,keys:a}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let h of a){let y=n.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new K(n,y,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let d=[];for(let h of c){let y=await h.key,m=await h.value;d.push({key:y,value:m,alwaysSet:h.alwaysSet})}return d}).then(d=>M.mergeObjectSync(s,d)):M.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{let n=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:v.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:R.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let s of j.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let s of j.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new t({...this._def,shape:()=>r})}deepPartial(){return Xe(this)}partial(e){let r={};for(let s of j.objectKeys(this.shape)){let n=this.shape[s];e&&!e[s]?r[s]=n:r[s]=n.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let s of j.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof J;)i=i._def.innerType;r[s]=i}return new t({...this._def,shape:()=>r})}keyof(){return Hi(j.objectKeys(this.shape))}};Z.create=(t,e)=>new Z({shape:()=>t,unknownKeys:"strip",catchall:ee.create(),typeName:R.ZodObject,...C(e)});Z.strictCreate=(t,e)=>new Z({shape:()=>t,unknownKeys:"strict",catchall:ee.create(),typeName:R.ZodObject,...C(e)});Z.lazycreate=(t,e)=>new Z({shape:t,unknownKeys:"strip",catchall:ee.create(),typeName:R.ZodObject,...C(e)});var Oe=class extends O{_parse(e){let{ctx:r}=this._processInputParams(e),s=this._def.options;function n(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new G(a.ctx.common.issues));return _(r,{code:p.invalid_union,unionErrors:o}),A}if(r.common.async)return Promise.all(s.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(n);{let i,o=[];for(let c of s){let d={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(c=>new G(c));return _(r,{code:p.invalid_union,unionErrors:a}),A}}get options(){return this._def.options}};Oe.create=(t,e)=>new Oe({options:t,typeName:R.ZodUnion,...C(e)});var ae=t=>t instanceof je?ae(t.schema):t instanceof Q?ae(t.innerType()):t instanceof Ne?[t.value]:t instanceof Ie?t.options:t instanceof qe?j.objectValues(t.enum):t instanceof $e?ae(t._def.innerType):t instanceof Re?[void 0]:t instanceof Ce?[null]:t instanceof J?[void 0,...ae(t.unwrap())]:t instanceof ne?[null,...ae(t.unwrap())]:t instanceof wt||t instanceof Ue?ae(t.unwrap()):t instanceof Le?ae(t._def.innerType):[],er=class t extends O{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==w.object)return _(r,{code:p.invalid_type,expected:w.object,received:r.parsedType}),A;let s=this.discriminator,n=r.data[s],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(_(r,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){let n=new Map;for(let i of r){let o=ae(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(n.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,i)}}return new t({typeName:R.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...C(s)})}};function ns(t,e){let r=re(t),s=re(e);if(t===e)return{valid:!0,data:t};if(r===w.object&&s===w.object){let n=j.objectKeys(e),i=j.objectKeys(t).filter(a=>n.indexOf(a)!==-1),o={...t,...e};for(let a of i){let c=ns(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===w.array&&s===w.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],c=ns(o,a);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===w.date&&s===w.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Pe=class extends O{_parse(e){let{status:r,ctx:s}=this._processInputParams(e),n=(i,o)=>{if(Yt(i)||Yt(o))return A;let a=ns(i.value,o.value);return a.valid?((Xt(i)||Xt(o))&&r.dirty(),{status:r.value,value:a.data}):(_(s,{code:p.invalid_intersection_types}),A)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>n(i,o)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Pe.create=(t,e,r)=>new Pe({left:t,right:e,typeName:R.ZodIntersection,...C(r)});var se=class t extends O{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.array)return _(s,{code:p.invalid_type,expected:w.array,received:s.parsedType}),A;if(s.data.length<this._def.items.length)return _(s,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&s.data.length>this._def.items.length&&(_(s,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...s.data].map((o,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new K(s,o,s.path,a)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>M.mergeArray(r,o)):M.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};se.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new se({items:t,typeName:R.ZodTuple,rest:null,...C(e)})};var tr=class t extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.object)return _(s,{code:p.invalid_type,expected:w.object,received:s.parsedType}),A;let n=[],i=this._def.keyType,o=this._def.valueType;for(let a in s.data)n.push({key:i._parse(new K(s,a,s.path,a)),value:o._parse(new K(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?M.mergeObjectAsync(r,n):M.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof O?new t({keyType:e,valueType:r,typeName:R.ZodRecord,...C(s)}):new t({keyType:ye.create(),valueType:e,typeName:R.ZodRecord,...C(r)})}},rt=class extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.map)return _(s,{code:p.invalid_type,expected:w.map,received:s.parsedType}),A;let n=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([a,c],d)=>({key:n._parse(new K(s,a,s.path,[d,"key"])),value:i._parse(new K(s,c,s.path,[d,"value"]))}));if(s.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of o){let d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return A;(d.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(d.value,h.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of o){let d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return A;(d.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(d.value,h.value)}return{status:r.value,value:a}}}};rt.create=(t,e,r)=>new rt({valueType:e,keyType:t,typeName:R.ZodMap,...C(r)});var st=class t extends O{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.set)return _(s,{code:p.invalid_type,expected:w.set,received:s.parsedType}),A;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(_(s,{code:p.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(_(s,{code:p.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function o(c){let d=new Set;for(let h of c){if(h.status==="aborted")return A;h.status==="dirty"&&r.dirty(),d.add(h.value)}return{status:r.value,value:d}}let a=[...s.data.values()].map((c,d)=>i._parse(new K(s,c,s.path,d)));return s.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:v.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:v.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};st.create=(t,e)=>new st({valueType:t,minSize:null,maxSize:null,typeName:R.ZodSet,...C(e)});var rr=class t extends O{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==w.function)return _(r,{code:p.invalid_type,expected:w.function,received:r.parsedType}),A;function s(a,c){return bt({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Qe(),oe].filter(d=>!!d),issueData:{code:p.invalid_arguments,argumentsError:c}})}function n(a,c){return bt({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Qe(),oe].filter(d=>!!d),issueData:{code:p.invalid_return_type,returnTypeError:c}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof _e){let a=this;return B(async function(...c){let d=new G([]),h=await a._def.args.parseAsync(c,i).catch(b=>{throw d.addIssue(s(c,b)),d}),y=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(y,i).catch(b=>{throw d.addIssue(n(y,b)),d})})}else{let a=this;return B(function(...c){let d=a._def.args.safeParse(c,i);if(!d.success)throw new G([s(c,d.error)]);let h=Reflect.apply(o,this,d.data),y=a._def.returns.safeParse(h,i);if(!y.success)throw new G([n(h,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:se.create(e).rest(ce.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new t({args:e||se.create([]).rest(ce.create()),returns:r||ce.create(),typeName:R.ZodFunction,...C(s)})}},je=class extends O{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};je.create=(t,e)=>new je({getter:t,typeName:R.ZodLazy,...C(e)});var Ne=class extends O{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return _(r,{received:r.data,code:p.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ne.create=(t,e)=>new Ne({value:t,typeName:R.ZodLiteral,...C(e)});function Hi(t,e){return new Ie({values:t,typeName:R.ZodEnum,...C(e)})}var Ie=class t extends O{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),s=this._def.values;return _(r,{expected:j.joinValues(s),received:r.parsedType,code:p.invalid_type}),A}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),s=this._def.values;return _(r,{received:r.data,code:p.invalid_enum_value,options:s}),A}return B(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}};Ie.create=Hi;var qe=class extends O{_parse(e){let r=j.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==w.string&&s.parsedType!==w.number){let n=j.objectValues(r);return _(s,{expected:j.joinValues(n),received:s.parsedType,code:p.invalid_type}),A}if(this._cache||(this._cache=new Set(j.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let n=j.objectValues(r);return _(s,{received:s.data,code:p.invalid_enum_value,options:n}),A}return B(e.data)}get enum(){return this._def.values}};qe.create=(t,e)=>new qe({values:t,typeName:R.ZodNativeEnum,...C(e)});var _e=class extends O{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==w.promise&&r.common.async===!1)return _(r,{code:p.invalid_type,expected:w.promise,received:r.parsedType}),A;let s=r.parsedType===w.promise?r.data:Promise.resolve(r.data);return B(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};_e.create=(t,e)=>new _e({type:t,typeName:R.ZodPromise,...C(e)});var Q=class extends O{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:o=>{_(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let o=n.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return A;let c=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return c.status==="aborted"?A:c.status==="dirty"?Ee(c.value):r.value==="dirty"?Ee(c.value):c});{if(r.value==="aborted")return A;let a=this._def.schema._parseSync({data:o,path:s.path,parent:s});return a.status==="aborted"?A:a.status==="dirty"?Ee(a.value):r.value==="dirty"?Ee(a.value):a}}if(n.type==="refinement"){let o=a=>{let c=n.refinement(a,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){let a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?A:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?A:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(n.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!me(o))return A;let a=n.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>me(o)?Promise.resolve(n.transform(o.value,i)).then(a=>({status:r.value,value:a})):A);j.assertNever(n)}};Q.create=(t,e,r)=>new Q({schema:t,typeName:R.ZodEffects,effect:e,...C(r)});Q.createWithPreprocess=(t,e,r)=>new Q({schema:e,effect:{type:"preprocess",transform:t},typeName:R.ZodEffects,...C(r)});var J=class extends O{_parse(e){return this._getType(e)===w.undefined?B(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};J.create=(t,e)=>new J({innerType:t,typeName:R.ZodOptional,...C(e)});var ne=class extends O{_parse(e){return this._getType(e)===w.null?B(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ne.create=(t,e)=>new ne({innerType:t,typeName:R.ZodNullable,...C(e)});var $e=class extends O{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return r.parsedType===w.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};$e.create=(t,e)=>new $e({innerType:t,typeName:R.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...C(e)});var Le=class extends O{_parse(e){let{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ye(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new G(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new G(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Le.create=(t,e)=>new Le({innerType:t,typeName:R.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...C(e)});var nt=class extends O{_parse(e){if(this._getType(e)!==w.nan){let s=this._getOrReturnCtx(e);return _(s,{code:p.invalid_type,expected:w.nan,received:s.parsedType}),A}return{status:"valid",value:e.data}}};nt.create=t=>new nt({typeName:R.ZodNaN,...C(t)});var ch=Symbol("zod_brand"),wt=class extends O{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},xt=class t extends O{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?A:i.status==="dirty"?(r.dirty(),Ee(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?A:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,r){return new t({in:e,out:r,typeName:R.ZodPipeline})}},Ue=class extends O{_parse(e){let r=this._def.innerType._parse(e),s=n=>(me(n)&&(n.value=Object.freeze(n.value)),n);return Ye(r)?r.then(n=>s(n)):s(r)}unwrap(){return this._def.innerType}};Ue.create=(t,e)=>new Ue({innerType:t,typeName:R.ZodReadonly,...C(e)});function $i(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Mi(t,e={},r){return t?ge.create().superRefine((s,n)=>{let i=t(s);if(i instanceof Promise)return i.then(o=>{if(!o){let a=$i(e,s),c=a.fatal??r??!0;n.addIssue({code:"custom",...a,fatal:c})}});if(!i){let o=$i(e,s),a=o.fatal??r??!0;n.addIssue({code:"custom",...o,fatal:a})}}):ge.create()}var uh={object:Z.lazycreate},R;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(R||(R={}));var dh=(t,e={message:`Input not instance of ${t.name}`})=>Mi(r=>r instanceof t,e),zi=ye.create,Bi=ke.create,hh=nt.create,fh=Te.create,Fi=Se.create,lh=Ae.create,ph=et.create,mh=Re.create,yh=Ce.create,gh=ge.create,_h=ce.create,bh=ee.create,wh=tt.create,xh=ue.create,vh=Z.create,Eh=Z.strictCreate,kh=Oe.create,Th=er.create,Sh=Pe.create,Ah=se.create,Rh=tr.create,Ch=rt.create,Oh=st.create,Ph=rr.create,jh=je.create,Nh=Ne.create,Ih=Ie.create,qh=qe.create,$h=_e.create,Lh=Q.create,Uh=J.create,Dh=ne.create,Hh=Q.createWithPreprocess,Mh=xt.create,zh=()=>zi().optional(),Bh=()=>Bi().optional(),Fh=()=>Fi().optional(),Vh={string:t=>ye.create({...t,coerce:!0}),number:t=>ke.create({...t,coerce:!0}),boolean:t=>Se.create({...t,coerce:!0}),bigint:t=>Te.create({...t,coerce:!0}),date:t=>Ae.create({...t,coerce:!0})};var Wh=A;var Gh=S.object({packageManager:S.string(),packageName:S.string(),requirements:S.string()}),Vi=S.object({repository:S.object({dependencyGraphManifests:S.object({nodes:S.array(S.object({blobPath:S.string(),dependencies:S.object({nodes:S.array(Gh)}),dependenciesCount:S.number(),exceedsMaxSize:S.boolean(),filename:S.string(),parseable:S.boolean()}))})})}),$y=S.intersection(S.object({coordinates:S.array(S.string())}),S.union([S.object({renderer:S.literal("html"),options:S.object({template:S.string().optional()})}),S.object({renderer:S.literal("json")}),S.object({renderer:S.literal("template"),options:S.object({template:S.string()})}),S.object({renderer:S.literal("text")})])),Wi=S.object({content:S.string(),summary:S.object({total:S.number(),warnings:S.object({noDefinition:S.array(S.string()),noLicense:S.array(S.string()),noCopyright:S.array(S.string())})})}),Gi=S.union([S.literal("html"),S.literal("json"),S.literal("markdown"),S.literal("text")]);function is(t){return process.env[`INPUT_${t.toUpperCase()}`]||""}var sr=class{format="text";filename="NOTICE";token;repoOwner;repoName;constructor(){let e=is("format"),r=Gi.safeParse(e);if(!r.success)throw console.log(`::error::Unknown format: ${e}`),new Error;if(this.format=r.data,this.filename=is("filename"),u.emptyStringOrWhitespace(this.filename))throw console.log("::error::Invalid filename"),new Error;if(this.token=is("token"),u.emptyStringOrWhitespace(this.token))throw console.log("::error::Invalid token"),new Error;let s=process.env.GITHUB_REPOSITORY;if(u.undefined(s))throw console.log("::error::Invalid repository"),new Error;let[n,i]=s.split("/");this.repoOwner=n,this.repoName=i}};var nr=class t{static convertToCoordinate(e){switch(e.packageManager){case"NPM":return t.#t(e);default:console.warn(`Unknown package manager: ${e.packageManager}`)}}static#t(e){return e.packageName.includes("/")?`npm/npmjs/${e.packageName}/${e.requirements.substring(2)}`:`npm/npmjs/-/${e.packageName}/${e.requirements.substring(2)}`}};import{setTimeout as im}from"node:timers/promises";import{EventEmitter as sm}from"node:events";var os=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},ie=Object.freeze({pending:Symbol("pending"),canceled:Symbol("canceled"),resolved:Symbol("resolved"),rejected:Symbol("rejected")}),it=class t{static fn(e){return(...r)=>new t((s,n,i)=>{r.push(i),e(...r).then(s,n)})}#t=[];#s=!0;#e=ie.pending;#r;#n;constructor(e){this.#r=new Promise((r,s)=>{this.#n=s;let n=a=>{(this.#e!==ie.canceled||!o.shouldReject)&&(r(a),this.#i(ie.resolved))},i=a=>{(this.#e!==ie.canceled||!o.shouldReject)&&(s(a),this.#i(ie.rejected))},o=a=>{if(this.#e!==ie.pending)throw new Error(`The \`onCancel\` handler was attached after the promise ${this.#e.description}.`);this.#t.push(a)};Object.defineProperties(o,{shouldReject:{get:()=>this.#s,set:a=>{this.#s=a}}}),e(n,i,o)})}then(e,r){return this.#r.then(e,r)}catch(e){return this.#r.catch(e)}finally(e){return this.#r.finally(e)}cancel(e){if(this.#e===ie.pending){if(this.#i(ie.canceled),this.#t.length>0)try{for(let r of this.#t)r()}catch(r){this.#n(r);return}this.#s&&this.#n(new os(e))}}get isCanceled(){return this.#e===ie.canceled}#i(e){this.#e===ie.pending&&(this.#e=e)}};Object.setPrototypeOf(it.prototype,Promise.prototype);function Zh(t){return u.object(t)&&"_onResponse"in t}var L=class extends Error{input;code;stack;response;request;timings;constructor(e,r,s){if(super(e,{cause:r}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=r.code??"ERR_GOT_REQUEST_ERROR",this.input=r.input,Zh(s)?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s.response}),this.options=s.options):this.options=s,this.timings=this.request?.timings,u.string(r.stack)&&u.string(this.stack)){let n=this.stack.indexOf(this.message)+this.message.length,i=this.stack.slice(n).split(`
`).reverse(),o=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;o.length>0&&o[0]===i[0];)i.shift();this.stack=`${this.stack.slice(0,n)}${i.reverse().join(`
`)}${o.reverse().join(`
`)}`}}},ir=class extends L{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},be=class extends L{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},or=class extends L{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},vt=class extends L{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Et=class extends L{timings;event;constructor(e,r,s){super(e.message,e,s),this.name="TimeoutError",this.event=e.event,this.timings=r}},kt=class extends L{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},ar=class extends L{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},cr=class extends L{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}};import tc from"node:process";import{Buffer as Ft}from"node:buffer";import{Duplex as Qp}from"node:stream";import Yp,{ServerResponse as ec}from"node:http";var Ji=We(Zi(),1);import{errorMonitor as Kh}from"events";import{types as Qh}from"util";var Yh=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=o=>{o.once(Kh,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let s=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",s);let n=o=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,Qh.isProxy(o))return;let a=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};o.prependOnceListener("lookup",a),(0,Ji.default)(o,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(o.removeListener("lookup",a),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?n(t.socket):t.prependOnceListener("socket",n);let i=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};return t.writableFinished?i():t.prependOnceListener("finish",i),t.prependOnceListener("response",o=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,o.timings=e,r(o),o.prependOnceListener("end",()=>{t.off("abort",s),o.off("aborted",s),!e.phases.total&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),o.prependOnceListener("aborted",s)}),e},Ki=Yh;import qf from"node:events";import fr from"node:url";import $f from"node:crypto";import Lf,{PassThrough as Uf}from"node:stream";var Xh="text/plain",ef="us-ascii",ds=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),tf=new Set(["https:","http:","file:"]),rf=t=>{try{let{protocol:e}=new URL(t);return e.endsWith(":")&&!e.includes(".")&&!tf.has(e)}catch{return!1}},sf=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:s,data:n,hash:i}=r.groups,o=s.split(";");i=e?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let c=o.shift()?.toLowerCase()??"",h=[...o.map(y=>{let[m,b=""]=y.split("=").map(k=>k.trim());return m==="charset"&&(b=b.toLowerCase(),b===ef)?"":`${m}${b?`=${b}`:""}`}).filter(Boolean)];return a&&h.push("base64"),(h.length>0||c&&c!==Xh)&&h.unshift(c),`data:${h.join(";")},${a?n.trim():n}${i?`#${i}`:""}`};function hs(t,e){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return sf(t,e);if(rf(t))return t;let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,c="";for(;;){let h=o.exec(n.pathname);if(!h)break;let y=h[0],m=h.index,b=n.pathname.slice(a,m);c+=b.replace(/\/{2,}/g,"/"),c+=y,a=m+y.length}let d=n.pathname.slice(a,n.pathname.length);c+=d.replace(/\/{2,}/g,"/"),n.pathname=c}if(n.pathname)try{n.pathname=decodeURI(n.pathname).replace(/\\/g,"%5C")}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];ds(a,e.removeDirectoryIndex)&&(o=o.slice(0,-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...n.searchParams.keys()])ds(o,e.removeQueryParameters)&&n.searchParams.delete(o);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(n.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(let o of[...n.searchParams.keys()])ds(o,e.keepQueryParameters)||n.searchParams.delete(o);if(e.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),e.removeExplicitPort&&n.port&&(n.port="");let i=t;return t=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}import{on as vf}from"node:events";import{finished as Ef}from"node:stream/promises";function nf(t,{checkOpen:e=!0}={}){return t!==null&&typeof t=="object"&&(t.writable||t.readable||!e||t.writable===void 0&&t.readable===void 0)&&typeof t.pipe=="function"}function Qi(t,{checkOpen:e=!0}={}){return nf(t,{checkOpen:e})&&(t.readable||!e)&&typeof t.read=="function"&&typeof t.readable=="boolean"&&typeof t.readableObjectMode=="boolean"&&typeof t.destroy=="function"&&typeof t.destroyed=="boolean"}var of=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),fs=class{#t;#s;#e=!1;#r=void 0;constructor(e,r){this.#t=e,this.#s=r}next(){let e=()=>this.#n();return this.#r=this.#r?this.#r.then(e,e):e(),this.#r}return(e){let r=()=>this.#i(e);return this.#r?this.#r.then(r,r):r()}async#n(){if(this.#e)return{done:!0,value:void 0};let e;try{e=await this.#t.read()}catch(r){throw this.#r=void 0,this.#e=!0,this.#t.releaseLock(),r}return e.done&&(this.#r=void 0,this.#e=!0,this.#t.releaseLock()),e}async#i(e){if(this.#e)return{done:!0,value:e};if(this.#e=!0,!this.#s){let r=this.#t.cancel(e);return this.#t.releaseLock(),await r,{done:!0,value:e}}return this.#t.releaseLock(),{done:!0,value:e}}},ls=Symbol();function Yi(){return this[ls].next()}Object.defineProperty(Yi,"name",{value:"next"});function Xi(t){return this[ls].return(t)}Object.defineProperty(Xi,"name",{value:"return"});var af=Object.create(of,{next:{enumerable:!0,configurable:!0,writable:!0,value:Yi},return:{enumerable:!0,configurable:!0,writable:!0,value:Xi}});function ps({preventCancel:t=!1}={}){let e=this.getReader(),r=new fs(e,t),s=Object.create(af);return s[ls]=r,s}var eo=t=>{if(Qi(t,{checkOpen:!1})&&Tt.on!==void 0)return uf(t);if(typeof t?.[Symbol.asyncIterator]=="function")return t;if(cf.call(t)==="[object ReadableStream]")return ps.call(t);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:cf}=Object.prototype,uf=async function*(t){let e=new AbortController,r={};df(t,e,r);try{for await(let[s]of Tt.on(t,"data",{signal:e.signal}))yield s}catch(s){if(r.error!==void 0)throw r.error;if(!e.signal.aborted)throw s}finally{t.destroy()}},df=async(t,e,r)=>{try{await Tt.finished(t,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(s){r.error=s}finally{e.abort()}},Tt={};var so=async(t,{init:e,convertChunk:r,getSize:s,truncateChunk:n,addChunk:i,getFinalChunk:o,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{let d=eo(t),h=e();h.length=0;try{for await(let y of d){let m=ff(y),b=r[m](y,h);no({convertedChunk:b,state:h,getSize:s,truncateChunk:n,addChunk:i,maxBuffer:c})}return hf({state:h,convertChunk:r,getSize:s,truncateChunk:n,addChunk:i,getFinalChunk:o,maxBuffer:c}),a(h)}catch(y){let m=typeof y=="object"&&y!==null?y:new Error(y);throw m.bufferedData=a(h),m}},hf=({state:t,getSize:e,truncateChunk:r,addChunk:s,getFinalChunk:n,maxBuffer:i})=>{let o=n(t);o!==void 0&&no({convertedChunk:o,state:t,getSize:e,truncateChunk:r,addChunk:s,maxBuffer:i})},no=({convertedChunk:t,state:e,getSize:r,truncateChunk:s,addChunk:n,maxBuffer:i})=>{let o=r(t),a=e.length+o;if(a<=i){to(t,e,n,a);return}let c=s(t,i-e.length);throw c!==void 0&&to(c,e,n,i),new ur},to=(t,e,r,s)=>{e.contents=r(t,e,s),e.length=s},ff=t=>{let e=typeof t;if(e==="string")return"string";if(e!=="object"||t===null)return"others";if(globalThis.Buffer?.isBuffer(t))return"buffer";let r=ro.call(t);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(t.byteLength)&&Number.isInteger(t.byteOffset)&&ro.call(t.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:ro}=Object.prototype,ur=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var io=()=>{};var oo=t=>{throw new Error(`Streams in object mode are not supported: ${String(t)}`)},ao=t=>t.length;async function ms(t,e){return so(t,xf,e)}var lf=()=>({contents:new ArrayBuffer(0)}),pf=t=>mf.encode(t),mf=new TextEncoder,co=t=>new Uint8Array(t),uo=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),yf=(t,e)=>t.slice(0,e),gf=(t,{contents:e,length:r},s)=>{let n=lo()?bf(e,s):_f(e,s);return new Uint8Array(n).set(t,r),n},_f=(t,e)=>{if(e<=t.byteLength)return t;let r=new ArrayBuffer(fo(e));return new Uint8Array(r).set(new Uint8Array(t),0),r},bf=(t,e)=>{if(e<=t.maxByteLength)return t.resize(e),t;let r=new ArrayBuffer(e,{maxByteLength:fo(e)});return new Uint8Array(r).set(new Uint8Array(t),0),r},fo=t=>ho**Math.ceil(Math.log(t)/Math.log(ho)),ho=2,wf=({contents:t,length:e})=>lo()?t:t.slice(0,e),lo=()=>"resize"in ArrayBuffer.prototype,xf={init:lf,convertChunk:{string:pf,buffer:co,arrayBuffer:co,dataView:uo,typedArray:uo,others:oo},getSize:ao,truncateChunk:yf,addChunk:gf,getFinalChunk:io,finalize:wf};async function dr(t,e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return po(await ms(t,e))}catch(r){throw r.bufferedData!==void 0&&(r.bufferedData=po(r.bufferedData)),r}}var po=t=>globalThis.Buffer.from(t);Object.assign(Tt,{on:vf,finished:Ef});var lr=We(yo(),1);import{Readable as Pf}from"node:stream";function ot(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var at=class extends Pf{statusCode;headers;body;url;constructor({statusCode:e,headers:r,body:s,url:n}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(s),this.push(null)}}),this.statusCode=e,this.headers=ot(r),this.body=s,this.url=n}};var St=We(xo(),1);var If=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function bs(t,e){if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(t),...If]),s={};for(let n of r)n in e||(s[n]={get(){let i=t[n];return typeof i=="function"?i.bind(t):i},set(i){t[n]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,s),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}var hr=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},he=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}};var xs=class{constructor(e,r){this.hooks=new Map,this.request=()=>(s,n)=>{let i;if(typeof s=="string")i=ws(fr.parse(s)),s={};else if(s instanceof fr.URL)i=ws(fr.parse(s.toString())),s={};else{let[m,...b]=(s.path??"").split("?"),k=b.length>0?`?${b.join("?")}`:"";i=ws({...s,pathname:m,search:k})}s={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...s,...Mf(i)},s.headers=Object.fromEntries(Df(s.headers).map(([m,b])=>[m.toLowerCase(),b]));let o=new qf,a=hs(fr.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),c=`${s.method}:${a}`;s.body&&s.method!==void 0&&["POST","PATCH","PUT"].includes(s.method)&&(s.body instanceof Lf.Readable?s.cache=!1:c+=`:${$f.createHash("md5").update(s.body).digest("hex")}`);let d=!1,h=!1,y=m=>{h=!0;let b=!1,k=()=>{},f=new Promise(x=>{k=()=>{b||(b=!0,x())}}),T=async x=>{if(d){x.status=x.statusCode;let E=lr.default.fromObject(d.cachePolicy).revalidatedPolicy(m,x);if(!E.modified){x.resume(),await new Promise(D=>{x.once("end",D)});let P=vo(E.policy.responseHeaders());x=new at({statusCode:d.statusCode,headers:P,body:d.body,url:d.url}),x.cachePolicy=E.policy,x.fromCache=!0}}x.fromCache||(x.cachePolicy=new lr.default(m,x,m),x.fromCache=!1);let N;m.cache&&x.cachePolicy.storable()?(N=Hf(x),(async()=>{try{let E=dr(x);await Promise.race([f,new Promise(pe=>x.once("end",pe)),new Promise(pe=>x.once("close",pe))]);let P=await E,D={url:x.url,statusCode:x.fromCache?d.statusCode:x.statusCode,body:P,cachePolicy:x.cachePolicy.toObject()},W=m.strictTtl?x.cachePolicy.timeToLive():void 0;if(m.maxTtl&&(W=W?Math.min(W,m.maxTtl):m.maxTtl),this.hooks.size>0)for(let pe of this.hooks.keys())D=await this.runHook(pe,D,x);await this.cache.set(c,D,W)}catch(E){o.emit("error",new he(E))}})()):m.cache&&d&&(async()=>{try{await this.cache.delete(c)}catch(E){o.emit("error",new he(E))}})(),o.emit("response",N??x),typeof n=="function"&&n(N??x)};try{let x=this.cacheRequest(m,T);x.once("error",k),x.once("abort",k),x.once("destroy",k),o.emit("request",x)}catch(x){o.emit("error",new hr(x))}};return(async()=>{let m=async k=>{await Promise.resolve();let f=k.cache?await this.cache.get(c):void 0;if(f===void 0&&!k.forceRefresh){y(k);return}let T=lr.default.fromObject(f.cachePolicy);if(T.satisfiesWithoutRevalidation(k)&&!k.forceRefresh){let x=vo(T.responseHeaders()),N=new at({statusCode:f.statusCode,headers:x,body:f.body,url:f.url});N.cachePolicy=T,N.fromCache=!0,o.emit("response",N),typeof n=="function"&&n(N)}else T.satisfiesWithoutRevalidation(k)&&Date.now()>=T.timeToLive()&&k.forceRefresh?(await this.cache.delete(c),k.headers=T.revalidationHeaders(k),y(k)):(d=f,k.headers=T.revalidationHeaders(k),y(k))},b=k=>o.emit("error",new he(k));if(this.cache instanceof St.default){let k=this.cache;k.once("error",b),o.on("error",()=>k.removeListener("error",b)),o.on("response",()=>k.removeListener("error",b))}try{await m(s)}catch(k){s.automaticFailover&&!h&&y(s),o.emit("error",new he(k))}})(),o},this.addHook=(s,n)=>{this.hooks.has(s)||this.hooks.set(s,n)},this.removeHook=s=>this.hooks.delete(s),this.getHook=s=>this.hooks.get(s),this.runHook=async(s,...n)=>this.hooks.get(s)?.(...n),r instanceof St.default?this.cache=r:typeof r=="string"?this.cache=new St.default({uri:r,namespace:"cacheable-request"}):this.cache=new St.default({store:r,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},Df=Object.entries,Hf=t=>{let e=new Uf({autoDestroy:!1});return bs(t,e),t.pipe(e)},Mf=t=>{let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e},ws=t=>({protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}),vo=t=>{let e=[];for(let r of Object.keys(t))e[r.toLowerCase()]=t[r];return e},Eo=xs;var rc=We(Ao(),1);var Io=t=>{throw TypeError(t)},ks=(t,e,r)=>e.has(t)||Io("Cannot "+r),U=(t,e,r)=>(ks(t,e,"read from private field"),r?r.call(t):e.get(t)),fe=(t,e,r)=>e.has(t)?Io("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),At=(t,e,r,s)=>(ks(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),Es=(t,e,r)=>(ks(t,e,"access private method"),r),Ro=65536;function*qo(t){if(t.byteLength<=Ro){yield t;return}let e=0;for(;e<t.byteLength;){let r=Math.min(t.byteLength-e,Ro),s=t.buffer.slice(e,e+r);e+=s.byteLength,yield new Uint8Array(s)}}var Co="abcdefghijklmnopqrstuvwxyz0123456789";function Wf(){let t=16,e="";for(;t--;)e+=Co[Math.random()*Co.length<<0];return e}var Oo=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),le=t=>typeof t=="function",Gf=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&le(t.getReader),Zf=t=>le(t[Symbol.asyncIterator]);async function*Jf(t){let e=t.getReader();for(;;){let{done:r,value:s}=await e.read();if(r)break;yield s}}async function*Po(t){for await(let e of t)yield*qo(e)}var Kf=t=>{if(Zf(t))return Po(t);if(Gf(t))return Po(Jf(t));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},ct=t=>!!(t&&typeof t=="object"&&le(t.constructor)&&t[Symbol.toStringTag]==="File"&&le(t.stream)&&t.name!=null),Nt=t=>!!(t&&le(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&le(t.append)&&le(t.getAll)&&le(t.entries)&&le(t[Symbol.iterator])),Qf=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function jo(t){if(Qf(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:e.constructor?.toString?.()===Object.toString()}var $o=t=>String(t).replace(/\r|\n/g,(e,r,s)=>e==="\r"&&s[r+1]!==`
`||e===`
`&&s[r-1]!=="\r"?`\r
`:e);function No(t,e){if(typeof e=="string"){for(let[r,s]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return s}}var Yf=t=>new Proxy(t,{get:(e,r)=>No(e,r),has:(e,r)=>No(e,r)!==void 0}),Xf={enableAdditionalHeaders:!1},pr={writable:!1,configurable:!1},we,Rt,mr,Ct,De,Ot,Pt,yr,jt,Ts,Lo,Uo=class{constructor(t,e,r){if(fe(this,jt),fe(this,we,`\r
`),fe(this,Rt),fe(this,mr),fe(this,Ct,"-".repeat(2)),fe(this,De,new TextEncoder),fe(this,Ot),fe(this,Pt),fe(this,yr),!Nt(t))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(jo(e)?r=e:s=e,s||(s=`form-data-encoder-${Wf()}`),typeof s!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!jo(r))throw new TypeError("Expected options argument to be an object.");At(this,Pt,Array.from(t.entries())),At(this,yr,{...Xf,...r}),At(this,Rt,U(this,De).encode(U(this,we))),At(this,mr,U(this,Rt).byteLength),this.boundary=s,this.contentType=`multipart/form-data; boundary=${this.boundary}`,At(this,Ot,U(this,De).encode(`${U(this,Ct)}${this.boundary}${U(this,Ct)}${U(this,we).repeat(2)}`));let n={"Content-Type":this.contentType},i=Es(this,jt,Lo).call(this);i&&(this.contentLength=i,n["Content-Length"]=i),this.headers=Yf(Object.freeze(n)),Object.defineProperties(this,{boundary:pr,contentType:pr,contentLength:pr,headers:pr})}*values(){for(let[t,e]of U(this,Pt)){let r=ct(e)?e:U(this,De).encode($o(e));yield Es(this,jt,Ts).call(this,t,r),yield r,yield U(this,Rt)}yield U(this,Ot)}async*encode(){for(let t of this.values())ct(t)?yield*Kf(t.stream()):yield*qo(t)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};we=new WeakMap;Rt=new WeakMap;mr=new WeakMap;Ct=new WeakMap;De=new WeakMap;Ot=new WeakMap;Pt=new WeakMap;yr=new WeakMap;jt=new WeakSet;Ts=function(t,e){let r="";if(r+=`${U(this,Ct)}${this.boundary}${U(this,we)}`,r+=`Content-Disposition: form-data; name="${Oo(t)}"`,ct(e)&&(r+=`; filename="${Oo(e.name)}"${U(this,we)}`,r+=`Content-Type: ${e.type||"application/octet-stream"}`),U(this,yr).enableAdditionalHeaders===!0){let s=ct(e)?e.size:e.byteLength;s!=null&&!isNaN(s)&&(r+=`${U(this,we)}Content-Length: ${s}`)}return U(this,De).encode(`${r}${U(this,we).repeat(2)}`)};Lo=function(){let t=0;for(let[e,r]of U(this,Pt)){let s=ct(r)?r:U(this,De).encode($o(r)),n=ct(s)?s.size:s.byteLength;if(n==null||isNaN(n))return;t+=Es(this,jt,Ts).call(this,e,s).byteLength,t+=n,t+=U(this,mr)}return String(t+U(this,Ot).byteLength)};import{Buffer as el}from"node:buffer";import{promisify as tl}from"node:util";function It(t){return u.nodeStream(t)&&u.function(t.getBoundary)}async function Ss(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(u.string(t))return el.byteLength(t);if(u.buffer(t))return t.length;if(It(t))return tl(t.getLength.bind(t))()}function qt(t,e,r){let s={};for(let n of r){let i=(...o)=>{e.emit(n,...o)};s[n]=i,t.on(n,i)}return()=>{for(let[n,i]of Object.entries(s))t.off(n,i)}}import rl from"node:net";function As(){let t=[];return{once(e,r,s){e.once(r,s),t.push({origin:e,event:r,fn:s})},unhandleAll(){for(let e of t){let{origin:r,event:s,fn:n}=e;r.removeListener(s,n)}t.length=0}}}var Do=Symbol("reentry"),sl=()=>{},$t=class extends Error{event;code;constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};function Rs(t,e,r){if(Do in t)return sl;t[Do]=!0;let s=[],{once:n,unhandleAll:i}=As(),o=new Map,a=(T,x,N)=>{let E=setTimeout(x,T,T,N);E.unref?.();let P=()=>{o.set(N,!0),clearTimeout(E)};return s.push(P),P},{host:c,hostname:d}=r,h=(T,x)=>{setTimeout(()=>{o.has(x)||t.destroy(new $t(T,x))},0)},y=()=>{for(let T of s)T();i()};if(t.once("error",T=>{if(y(),t.listenerCount("error")===0)throw T}),e.request!==void 0){let T=a(e.request,h,"request");n(t,"response",x=>{n(x,"end",T)})}if(e.socket!==void 0){let{socket:T}=e,x=()=>{h(T,"socket")};t.setTimeout(T,x),s.push(()=>{t.removeListener("timeout",x)})}let m=e.lookup!==void 0,b=e.connect!==void 0,k=e.secureConnect!==void 0,f=e.send!==void 0;return(m||b||k||f)&&n(t,"socket",T=>{let{socketPath:x}=t;if(T.connecting){let N=!!(x??rl.isIP(d??c??"")!==0);if(m&&!N&&T.address().address===void 0){let E=a(e.lookup,h,"lookup");n(T,"lookup",E)}if(b){let E=()=>a(e.connect,h,"connect");N?n(T,"connect",E()):n(T,"lookup",P=>{P===null&&n(T,"connect",E())})}k&&r.protocol==="https:"&&n(T,"connect",()=>{let E=a(e.secureConnect,h,"secureConnect");n(T,"secureConnect",E)})}if(f){let N=()=>a(e.send,h,"send");T.connecting?n(T,"connect",()=>{n(t,"upload-complete",N())}):n(t,"upload-complete",N())}}),e.response!==void 0&&n(t,"upload-complete",()=>{let T=a(e.response,h,"response");n(t,"response",T)}),e.read!==void 0&&n(t,"response",T=>{let x=a(e.read,h,"read");n(T,"end",x)}),y}function Cs(t){t=t;let e={protocol:t.protocol,hostname:u.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return u.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var Lt=class{weakMap;map;constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var nl=({attemptCount:t,retryOptions:e,error:r,retryAfter:s,computedValue:n})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a)return 0;if(r.response){if(s)return s>n?0:s;if(r.response.statusCode===413)return 0}let c=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+c},Ho=nl;import Lp from"node:process";import{promisify as Ja,inspect as Up}from"node:util";import{checkServerIdentity as Dp}from"node:tls";import Hp from"node:https";import Mp from"node:http";import{V4MAPPED as il,ADDRCONFIG as ol,ALL as Wo,promises as al,lookup as cl}from"node:dns";import{promisify as Os}from"node:util";import ul from"node:os";var{Resolver:Mo}=al,ut=Symbol("cacheableLookupCreateConnection"),Ps=Symbol("cacheableLookupInstance"),zo=Symbol("expires"),dl=typeof Wo=="number",Bo=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},hl=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},Fo=()=>{let t=!1,e=!1;for(let r of Object.values(ul.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},fl=t=>Symbol.iterator in t,gr=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),Vo={ttl:!0},ll={all:!0},pl={all:!0,family:4},ml={all:!0,family:6},Ut=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:i=new Mo,lookup:o=cl}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=e,this._resolver=i,this._dnsLookup=o&&Os(o),this.stats={cache:0,query:0},this._resolver instanceof Mo?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=Os(this._resolver.resolve4.bind(this._resolver)),this._resolve6=Os(this._resolver.resolve6.bind(this._resolver))),this._iface=Fo(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=s,s>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl,n.source)},s)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(e);if(r.family===6){let n=s.filter(i=>i.family===6);r.hints&il&&(dl&&r.hints&Wo||n.length===0)?hl(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&ol){let{_iface:n}=this;s=s.filter(i=>i.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return r.all?s:s[0]}async query(e){let r="cache",s=await this._cache.get(e);if(s&&this.stats.cache++,!s){let n=this._pending[e];if(n)this.stats.cache++,s=await n;else{r="query";let i=this.queryAndCache(e);this._pending[e]=i,this.stats.query++;try{s=await i}finally{delete this._pending[e]}}}return s=s.map(n=>({...n,source:r})),s}async _resolve(e){let[r,s]=await Promise.all([gr(this._resolve4(e,Vo)),gr(this._resolve6(e,Vo))]),n=0,i=0,o=0,a=Date.now();for(let c of r)c.family=4,c.expires=a+c.ttl*1e3,n=Math.max(n,c.ttl);for(let c of s)c.family=6,c.expires=a+c.ttl*1e3,i=Math.max(i,c.ttl);return r.length>0?s.length>0?o=Math.min(n,i):o=n:o=i,{entries:[...r,...s],cacheTtl:o}}async _lookup(e){try{let[r,s]=await Promise.all([gr(this._dnsLookup(e,pl)),gr(this._dnsLookup(e,ml))]);return{entries:[...r,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[zo]=Date.now()+s;try{await this._cache.set(e,r,s)}catch(n){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=n,i}}fl(this._cache)&&this._tick(s)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,ll);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,s),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[i,o]of this._cache){let a=o[zo];n>=a?this._cache.delete(i):a<s&&(s=a)}s!==1/0&&this._tick(s-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Bo(e),ut in e)throw new Error("CacheableLookup has been already installed");e[ut]=e.createConnection,e[Ps]=this,e.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),e[ut](r,s))}uninstall(e){if(Bo(e),e[ut]){if(e[Ps]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[ut],delete e[ut],delete e[Ps]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Fo(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};var Ya=We(Za(),1);function tn(t){let e=[],r=t.split(",");for(let s of r){let[n,...i]=s.split(";"),o=n.trim();if(o[0]!=="<"||o.at(-1)!==">")throw new Error(`Invalid format of the Link header reference: ${o}`);let a=o.slice(1,-1),c={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let d of i){let h=d.trim(),y=h.indexOf("=");if(y===-1)throw new Error(`Failed to parse Link header: ${t}`);let m=h.slice(0,y).trim(),b=h.slice(y+1).trim();c[m]=b}e.push({reference:a,parameters:c})}return e}var[Ka,zp]=Lp.versions.node.split(".").map(Number);function Bp(t){for(let e in t){let r=t[e];l.any([u.string,u.number,u.boolean,u.null,u.undefined],r)}}var Fp=new Map,kr,Vp=()=>kr||(kr=new Ut,kr),Wp={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(t){return t.request.options.responseType==="json"?t.body:JSON.parse(t.body)},paginate({response:t}){let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let s=tn(e).find(n=>n.parameters.rel==="next"||n.parameters.rel==='"next"');return s?{url:new URL(s.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!1},Gp=t=>{let{hooks:e,retry:r}=t,s={...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}};return s.url!==void 0&&(s.prefixUrl=""),s},Zp=t=>{let{hooks:e,retry:r}=t,s={...t};return u.object(t.context)&&(s.context={...t.context}),u.object(t.cacheOptions)&&(s.cacheOptions={...t.cacheOptions}),u.object(t.https)&&(s.https={...t.https}),u.object(t.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),u.object(t.agent)&&(s.agent={...t.agent}),u.object(t.headers)&&(s.headers={...t.headers}),u.object(r)&&(s.retry={...r},u.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),u.array(r.methods)&&(s.retry.methods=[...r.methods]),u.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),u.object(t.timeout)&&(s.timeout={...t.timeout}),u.object(e)&&(s.hooks={...e},u.array(e.init)&&(s.hooks.init=[...e.init]),u.array(e.beforeRequest)&&(s.hooks.beforeRequest=[...e.beforeRequest]),u.array(e.beforeError)&&(s.hooks.beforeError=[...e.beforeError]),u.array(e.beforeRedirect)&&(s.hooks.beforeRedirect=[...e.beforeRedirect]),u.array(e.beforeRetry)&&(s.hooks.beforeRetry=[...e.beforeRetry]),u.array(e.afterResponse)&&(s.hooks.afterResponse=[...e.afterResponse])),u.object(t.pagination)&&(s.pagination={...t.pagination}),s},Jp=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},Qa=(t,e,r)=>{let s=t.hooks?.init;if(s)for(let n of s)n(e,r)},Y=class t{_unixOptions;_internals;_merging;_init;constructor(e,r,s){if(l.any([u.string,u.urlInstance,u.object,u.undefined],e),l.any([u.object,u.undefined],r),l.any([u.object,u.undefined],s),e instanceof t||r instanceof t)throw new TypeError("The defaults must be passed as the third argument");this._internals=Gp(s?._internals??s??Wp),this._init=[...s?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(u.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if(r?.url!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(n){throw n.options=this,n}}merge(e){if(e){if(e instanceof t){for(let r of e._init)this.merge(r);return}e=Zp(e),Qa(this,e,this),Qa(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let s in e){if(s==="mutableDefaults"||s==="handlers"||s==="url")continue;if(!(s in this))throw new Error(`Unexpected option: ${s}`);let n=e[s];n!==void 0&&(this[s]=n,r=!0)}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){l.any([u.function,u.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){l.plainObject(e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);l.any([u.object,u.undefined],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){l.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){l.plainObject(e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);l.any([u.number,u.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(l.any([u.string,u.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){l.any([u.string,u.buffer,u.nodeStream,u.generator,u.asyncGenerator,Nt,u.undefined],e),u.nodeStream(e)&&l.truthy(e.readable),e!==void 0&&(l.undefined(this._internals.form),l.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){l.any([u.plainObject,u.undefined],e),e!==void 0&&(l.undefined(this._internals.body),l.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(l.undefined(this._internals.body),l.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(l.any([u.string,u.urlInstance,u.undefined],e),e===void 0){this._internals.url=void 0;return}if(u.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=`${this.prefixUrl}${e.toString()}`,s=new URL(r);if(this._internals.url=s,s.protocol==="unix:"&&(s.href=`http://unix${s.pathname}${s.search}`),s.protocol!=="http:"&&s.protocol!=="https:"){let n=new Error(`Unsupported protocol: ${s.protocol}`);throw n.code="ERR_UNSUPPORTED_PROTOCOL",n}if(this._internals.username&&(s.username=this._internals.username,this._internals.username=""),this._internals.password&&(s.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(s.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),s.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let n=/(?<socketPath>.+?):(?<path>.+)/.exec(`${s.pathname}${s.search}`);if(n?.groups){let{socketPath:i,path:o}=n.groups;this._unixOptions={socketPath:i,path:o,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(l.any([u.object,u.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:s}=e;l.function(r),l.function(s),r.length===4&&s.length===0?(r=Ja(r.bind(e)),s=Ja(s.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:s}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){l.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){l.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new URLSearchParams),this._internals.searchParams)}set searchParams(e){l.any([u.string,u.object,u.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let s=this.searchParams,n;if(u.string(e))n=new URLSearchParams(e);else if(e instanceof URLSearchParams)n=e;else{Bp(e),n=new URLSearchParams;for(let i in e){let o=e[i];o===null?n.append(i,""):o===void 0?s.delete(i):n.append(i,o)}}if(this._merging){for(let i of n.keys())s.delete(i);for(let[i,o]of n)s.append(i,o)}else r?r.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){l.any([u.function,u.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){l.any([u.object,u.boolean,u.undefined],e),e===!0?this._internals.dnsCache=Vp():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){l.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){l.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let s=r,n=e[s];if(l.any([u.array,u.undefined],n),n)for(let i of n)l.function(i);if(this._merging)n&&this._internals.hooks[s].push(...n);else{if(!n)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...n]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){l.any([u.boolean,u.function],e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){l.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){l.any([u.object,u.string,u.boolean,u.undefined],e),e===!0?this._internals.cache=Fp:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){l.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){l.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.username=s:this._internals.username=s}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){l.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.password=s:this._internals.password=s}get http2(){return this._internals.http2}set http2(e){l.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){l.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){l.plainObject(e),this._merging?Object.assign(this._internals.headers,ot(e)):this._internals.headers=ot(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){l.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){l.function(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){l.function(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(l.plainObject(e),l.any([u.function,u.undefined],e.calculateDelay),l.any([u.number,u.undefined],e.maxRetryAfter),l.any([u.number,u.undefined],e.limit),l.any([u.array,u.undefined],e.methods),l.any([u.array,u.undefined],e.statusCodes),l.any([u.array,u.undefined],e.errorCodes),l.any([u.number,u.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let s in e)if(!(s in this._internals.retry))throw new Error(`Unexpected retry option: ${s}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(s=>s.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){l.any([u.string,u.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){l.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){l.any([u.function,u.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){l.plainObject(e),l.any([u.boolean,u.undefined],e.shared),l.any([u.number,u.undefined],e.cacheHeuristic),l.any([u.number,u.undefined],e.immutableMinTimeToLive),l.any([u.boolean,u.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){l.plainObject(e),l.any([u.boolean,u.undefined],e.rejectUnauthorized),l.any([u.function,u.undefined],e.checkServerIdentity),l.any([u.string,u.object,u.array,u.undefined],e.certificateAuthority),l.any([u.string,u.object,u.array,u.undefined],e.key),l.any([u.string,u.object,u.array,u.undefined],e.certificate),l.any([u.string,u.undefined],e.passphrase),l.any([u.string,u.buffer,u.array,u.undefined],e.pfx),l.any([u.array,u.undefined],e.alpnProtocols),l.any([u.string,u.undefined],e.ciphers),l.any([u.string,u.buffer,u.undefined],e.dhparam),l.any([u.string,u.undefined],e.signatureAlgorithms),l.any([u.string,u.undefined],e.minVersion),l.any([u.string,u.undefined],e.maxVersion),l.any([u.boolean,u.undefined],e.honorCipherOrder),l.any([u.number,u.undefined],e.tlsSessionLifetime),l.any([u.string,u.undefined],e.ecdhCurve),l.any([u.string,u.buffer,u.array,u.undefined],e.certificateRevocationLists);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");l.any([u.string,u.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){l.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){l.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){l.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){l.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){l.any([u.number,u.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){l.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Up(this._internals,r)}createNativeRequestOptions(){let e=this._internals,r=e.url,s;r.protocol==="https:"?s=e.http2?e.agent:e.agent.https:s=e.agent.http;let{https:n}=e,{pfx:i}=n;return u.array(i)&&u.plainObject(i[0])&&(i=i.map(o=>({buf:o.buffer,passphrase:o.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??Dp,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:s,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?Jp(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(Ka<15||Ka===15&&zp<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return Ya.default.auto}return Hp.request}return Mp.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}};var pt=t=>{let{statusCode:e}=t,{followRedirect:r}=t.request.options,n=(typeof r=="function"?r(t):r)?299:399;return e>=200&&e<=n||e===304},lt=class extends L{constructor(e,r){let{options:s}=r.request;super(`${e.message} in "${s.url.toString()}"`,e,r.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},rn=(t,e,r,s)=>{let{rawBody:n}=t;try{if(e==="text")return n.toString(s);if(e==="json")return n.length===0?"":r(n.toString(s));if(e==="buffer")return n}catch(i){throw new lt(i,t)}throw new lt({message:`Unknown body type '${e}'`,name:"Error"},t)};function Kp(t){return t.writable&&!t.writableEnded}var Xa=Kp;function Tr(t){return t.protocol==="unix:"||t.hostname==="unix"}var Xp=u.string(tc.versions.brotli),em=new Set(["GET","HEAD"]),sn=new Lt,tm=new Set([300,301,302,303,304,307,308]),rm=["socket","connect","continue","information","upgrade"],Sr=()=>{},ze=class t extends Qp{["constructor"];_noPipe;options;response;requestUrl;redirectUrls;retryCount;_stopRetry;_downloadedSize;_uploadedSize;_stopReading;_pipedServerResponses;_request;_responseSize;_bodySize;_unproxyEvents;_isFromCache;_cannotHaveBody;_triggerRead;_cancelTimeouts;_removeListeners;_nativeResponse;_flushed;_aborted;_requestInitialized;constructor(e,r,s){super({autoDestroy:!1,highWaterMark:0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Sr,this._triggerRead=!1,this._cancelTimeouts=Sr,this._removeListeners=Sr,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Sr,this.on("pipe",i=>{i?.headers&&Object.assign(this.options.headers,i.headers)}),this.on("newListener",i=>{if(i==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new Y(e,r,s),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(i){let{options:o}=i;o&&(this.options=o),this.flush=async()=>{this.flush=async()=>{},this.destroy(i)};return}let{body:n}=this.options;if(u.nodeStream(n)&&n.once("error",i=>{this._flushed?this._beforeError(new vt(i,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new vt(i,this))}}),this.options.signal){let i=()=>{this.options.signal?.reason?.name==="TimeoutError"?this.destroy(new Et(this.options.signal.reason,this.timings,this)):this.destroy(new cr(this))};this.options.signal.aborted?i():(this.options.signal.addEventListener("abort",i),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",i)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:s}=this,n=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof L||(e=new L(e.message,e,this));let i=e;(async()=>{if(r?.readable&&!r.rawBody&&!this._request?.socket?.destroyed&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let o;try{let a;r&&"retry-after"in r.headers&&(a=Number(r.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(r.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3);let c=s.retry;o=await c.calculateDelay({attemptCount:n,retryOptions:c,error:i,retryAfter:a,computedValue:Ho({attemptCount:n,retryOptions:c,error:i,retryAfter:a,computedValue:c.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY})})}catch(a){this._error(new L(a.message,a,this));return}if(o){if(await new Promise(a=>{let c=setTimeout(a,o);this._stopRetry=()=>{clearTimeout(c),a()}}),this.destroyed)return;try{for(let a of this.options.hooks.beforeRetry)await a(i,this.retryCount+1)}catch(a){this._error(new L(a.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,a=>{let c=new t(s.url,a,s);return c.retryCount=this.retryCount+1,tc.nextTick(()=>{c.flush()}),c});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(e,r,s){let n=()=>{this._writeRequest(e,r,s)};this._requestInitialized?n():this._jobs.push(n)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(s=>{this._request?._writableState?.errored||(s||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request?.emit("upload-complete")),e(s))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:s}=this.options;u.nodeStream(s)&&s.destroy()}this._request&&this._request.destroy(),e!==null&&!u.undefined(e)&&!(e instanceof L)&&(e=new L(e.message,e,this)),r(e)}pipe(e,r){return e instanceof ec&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof ec&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:r}=e,s=!u.undefined(e.form),n=!u.undefined(e.json),i=!u.undefined(e.body),o=em.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=o,s||n||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!u.string(r["content-type"]);if(i){if(Nt(e.body)){let d=new Uo(e.body);a&&(r["content-type"]=d.headers["Content-Type"]),"Content-Length"in d.headers&&(r["content-length"]=d.headers["Content-Length"]),e.body=d.encode()}It(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(s){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:d}=e;e.form=void 0,e.body=new URLSearchParams(d).toString()}else{a&&(r["content-type"]="application/json");let{json:d}=e;e.json=void 0,e.body=e.stringifyJson(d)}let c=await Ss(e.body,e.headers);u.undefined(r["content-length"])&&u.undefined(r["transfer-encoding"])&&!o&&!u.undefined(c)&&(r["content-length"]=String(c))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:s}=r;this._nativeResponse=e,r.decompress&&(e=(0,rc.default)(e));let n=e.statusCode,i=e;i.statusMessage=i.statusMessage??Yp.STATUS_CODES[n],i.url=r.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=pt(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{this._aborted=!0,e.destroy(),this._beforeError(new kt(a,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new kt({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(u.object(r.cookieJar)&&o){let a=o.map(async c=>r.cookieJar.setCookie(c,s.toString()));r.ignoreInvalidCookies&&(a=a.map(async c=>{try{await c}catch{}}));try{await Promise.all(a)}catch(c){this._beforeError(c);return}}if(!this.isAborted){if(e.headers.location&&tm.has(n)&&(typeof r.followRedirect=="function"?r.followRedirect(i):r.followRedirect)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new ir(this));return}this._request=void 0;let c=new Y(void 0,void 0,this.options),d=n===303&&c.method!=="GET"&&c.method!=="HEAD",h=n!==307&&n!==308,y=c.methodRewriting&&h;(d||y)&&(c.method="GET",c.body=void 0,c.json=void 0,c.form=void 0,delete c.headers["content-length"]);try{let m=Ft.from(e.headers.location,"binary").toString(),b=new URL(m,s);if(!Tr(s)&&Tr(b)){this._beforeError(new L("Cannot redirect to UNIX socket",{},this));return}b.hostname!==s.hostname||b.port!==s.port?("host"in c.headers&&delete c.headers.host,"cookie"in c.headers&&delete c.headers.cookie,"authorization"in c.headers&&delete c.headers.authorization,(c.username||c.password)&&(c.username="",c.password="")):(b.username=c.username,b.password=c.password),this.redirectUrls.push(b),c.prefixUrl="",c.url=b;for(let k of c.hooks.beforeRedirect)await k(c,i);this.emit("redirect",c,i),this.options=c,await this._makeRequest()}catch(m){this._beforeError(m);return}return}if(r.isStream&&r.throwHttpErrors&&!pt(i)){this._beforeError(new be(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let a of this._pipedServerResponses)if(!a.headersSent){for(let c in e.headers){let d=r.decompress?c!=="content-encoding":!0,h=e.headers[c];d&&a.setHeader(c,h)}a.statusCode=n}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await e.toArray(),s=gt(r.at(0))?Ft.concat(r):Ft.from(r.join(""));if(!this.isAborted)return this.response.rawBody=s,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:s,url:n}=r;Ki(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=Rs(e,s,n);let i=r.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof $t?new Et(o,this.timings,this):new L(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=qt(e,this,rm),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,s)=>{super.write(e,n=>{if(n){s(n);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;u.nodeStream(e)?e.pipe(r):u.generator(e)||u.asyncGenerator(e)?(async()=>{try{for await(let s of e)await this._asyncWrite(s);super.end()}catch(s){this._beforeError(s)}})():u.undefined(e)?(this._cannotHaveBody||this._noPipe)&&r.end():(this._writeRequest(e,void 0,()=>{}),r.end())}_prepareCache(e){if(!sn.has(e)){let r=new Eo((s,n)=>{let i=s._request(s,n);return u.promise(i)&&(i.once=(o,a)=>{if(o==="error")(async()=>{try{await i}catch(c){a(c)}})();else if(o==="abort"||o==="destroy")(async()=>{try{(await i).once(o,a)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${o}`);return i}),i},e);sn.set(e,r.request())}}async _createCacheableRequest(e,r){return new Promise((s,n)=>{Object.assign(r,Cs(e));let i,o=sn.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,i){let c=()=>{a.req&&(a.complete=a.req.res.complete)};a.prependOnceListener("end",c),c(),(await i).emit("cacheableResponse",a)}s(a)});o.once("error",n),o.once("request",async a=>{i=a,s(i)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:s,password:n}=e,i=e.cookieJar;for(let d in r)if(u.undefined(r[d]))delete r[d];else if(u.null(r[d]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${d}\` header`);if(e.decompress&&u.undefined(r["accept-encoding"])&&(r["accept-encoding"]=Xp?"gzip, deflate, br":"gzip, deflate"),s||n){let d=Ft.from(`${s}:${n}`).toString("base64");r.authorization=`Basic ${d}`}if(i){let d=await i.getCookieString(e.url.toString());u.nonEmptyString(d)&&(r.cookie=d)}e.prefixUrl="";let o;for(let d of e.hooks.beforeRequest){let h=await d(e);if(!u.undefined(h)){o=()=>h;break}}o||=e.getRequestFunction();let a=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));let c=e.cache?this._createCacheableRequest:o;try{let d=c(a,this._requestOptions);u.promise(d)&&(d=await d),u.undefined(d)&&(d=e.getFallbackRequestFunction()(a,this._requestOptions),u.promise(d)&&(d=await d)),Xa(d)?this._onRequest(d):this.writable?(this.once("finish",()=>{this._onResponse(d)}),this._sendBody()):this._onResponse(d)}catch(d){throw d instanceof he?new or(d,this):d}}async _error(e){try{if(!(e instanceof be&&!this.options.throwHttpErrors))for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new L(r.message,r,this)}this.destroy(e)}_writeRequest(e,r,s){!this._request||this._request.destroyed||this._request.write(e,r,n=>{if(!n&&!this._request.destroyed){this._uploadedSize+=Ft.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}s(n)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}};var Ar=class extends L{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var nm=["request","response","redirect","uploadProgress","downloadProgress"];function Rr(t){let e,r,s,n=new sm,i=new it((a,c,d)=>{d(()=>{e.destroy()}),d.shouldReject=!1,d(()=>{c(new Ar(e))});let h=y=>{d(()=>{});let m=t??new ze(void 0,void 0,s);m.retryCount=y,m._noPipe=!0,e=m,m.once("response",async f=>{let T=(f.headers["content-encoding"]??"").toLowerCase(),x=T==="gzip"||T==="deflate"||T==="br",{options:N}=m;if(x&&!N.decompress)f.body=f.rawBody;else try{f.body=rn(f,N.responseType,N.parseJson,N.encoding)}catch(E){try{f.body=f.rawBody.toString()}catch(P){m._beforeError(new lt(P,f));return}if(pt(f)){m._beforeError(E);return}}try{let E=N.hooks.afterResponse;for(let[P,D]of E.entries())if(f=await D(f,async W=>{throw N.merge(W),N.prefixUrl="",W.url&&(N.url=W.url),N.hooks.afterResponse=N.hooks.afterResponse.slice(0,P),new ar(m)}),!(u.object(f)&&u.number(f.statusCode)&&!u.nullOrUndefined(f.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(E){m._beforeError(E);return}if(r=f,!pt(f)){m._beforeError(new be(f));return}m.destroy(),a(m.options.resolveBodyOnly?f.body:f)});let b=f=>{if(i.isCanceled)return;let{options:T}=m;if(f instanceof be&&!T.throwHttpErrors){let{response:x}=f;m.destroy(),a(m.options.resolveBodyOnly?x.body:x);return}c(f)};m.once("error",b);let k=m.options?.body;m.once("retry",(f,T)=>{t=void 0;let x=m.options.body;if(k===x&&u.nodeStream(x)){T.message="Cannot retry with consumed body stream",b(T);return}s=m.options,h(f)}),qt(m,n,nm),u.undefined(t)&&m.flush()};h(0)});i.on=(a,c)=>(n.on(a,c),i),i.off=(a,c)=>(n.off(a,c),i);let o=a=>{let c=(async()=>{await i;let{options:d}=r.request;return rn(r,a,d.parseJson,d.encoding)})();return Object.defineProperties(c,Object.getOwnPropertyDescriptors(i)),c};return i.json=()=>{if(e.options){let{headers:a}=e.options;!e.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}var om=t=>u.function(t),am=["get","post","put","patch","head","delete"],sc=t=>{t={options:new Y(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=(s,n,i=t.options)=>{let o=new ze(s,n,i),a,c=y=>(o.options=y,o._noPipe=!y?.isStream,o.flush(),y?.isStream?o:(a||=Rr(o),a)),d=0,h=y=>{let b=(t.handlers[d++]??c)(y,h);if(u.promise(b)&&!o.options?.isStream&&(a||=Rr(o),b!==a)){let k=Object.getOwnPropertyDescriptors(a);for(let f in k)f in b&&delete k[f];Object.defineProperties(b,k),b.cancel=a.cancel}return b};return h(o.options)};e.extend=(...s)=>{let n=new Y(void 0,void 0,t.options),i=[...t.handlers],o;for(let a of s)om(a)?(n.merge(a.defaults.options),i.push(...a.defaults.handlers),o=a.defaults.mutableDefaults):(n.merge(a),a.handlers&&i.push(...a.handlers),o=a.mutableDefaults);return sc({options:n,handlers:i,mutableDefaults:!!o})};let r=async function*(s,n){let i=new Y(s,n,t.options);i.resolveBodyOnly=!1;let{pagination:o}=i;l.function(o.transform),l.function(o.shouldContinue),l.function(o.filter),l.function(o.paginate),l.number(o.countLimit),l.number(o.requestLimit),l.number(o.backoff);let a=[],{countLimit:c}=o,d=0;for(;d<o.requestLimit;){d!==0&&await im(o.backoff);let h=await e(void 0,void 0,i),y=await o.transform(h),m=[];l.array(y);for(let k of y)if(o.filter({item:k,currentItems:m,allItems:a})&&(!o.shouldContinue({item:k,currentItems:m,allItems:a})||(yield k,o.stackAllItems&&a.push(k),m.push(k),--c<=0)))return;let b=o.paginate({response:h,currentItems:m,allItems:a});if(b===!1)return;b===h.request.options?i=h.request.options:(i.merge(b),l.any([u.urlInstance,u.undefined],b.url),b.url!==void 0&&(i.prefixUrl="",i.url=b.url)),d++}};e.paginate=r,e.paginate.all=async(s,n)=>{let i=[];for await(let o of r(s,n))i.push(o);return i},e.paginate.each=r,e.stream=(s,n)=>e(s,{...n,isStream:!0});for(let s of am)e[s]=(n,i)=>e(n,{...i,method:s}),e.stream[s]=(n,i)=>e(n,{...i,method:s,isStream:!0});return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},nc=sc;var cm={options:new Y,handlers:[],mutableDefaults:!1},um=nc(cm),ic=um;var Cr=class{async fetchNoticeFile(e,r){let s=await ic.post("https://api.clearlydefined.io/notices",{json:{coordinates:e,renderer:r}}).json(),n=await Wi.safeParseAsync(s);if(!n.success)throw console.log(`::error::Invalid response from ClearlyDefined: ${n.error}`),new Error;return n.data}};function ve(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Or(t,e,r,s){if(typeof r!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(e)?e.reverse().reduce((n,i)=>Or.bind(null,t,i,n,s),r)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((n,i)=>i.hook.bind(null,n,s),r)():r(s))}function oc(t,e,r,s){let n=s;t.registry[r]||(t.registry[r]=[]),e==="before"&&(s=(i,o)=>Promise.resolve().then(n.bind(null,o)).then(i.bind(null,o))),e==="after"&&(s=(i,o)=>{let a;return Promise.resolve().then(i.bind(null,o)).then(c=>(a=c,n(a,o))).then(()=>a)}),e==="error"&&(s=(i,o)=>Promise.resolve().then(i.bind(null,o)).catch(a=>n(a,o))),t.registry[r].push({hook:s,orig:n})}function ac(t,e,r){if(!t.registry[e])return;let s=t.registry[e].map(n=>n.orig).indexOf(r);s!==-1&&t.registry[e].splice(s,1)}var cc=Function.bind,uc=cc.bind(cc);function dc(t,e,r){let s=uc(ac,null).apply(null,r?[e,r]:[e]);t.api={remove:s},t.remove=s,["before","error","after","wrap"].forEach(n=>{let i=r?[e,n,r]:[e,n];t[n]=t.api[n]=uc(oc,null).apply(null,i)})}function dm(){let t=Symbol("Singular"),e={registry:{}},r=Or.bind(null,e,t);return dc(r,e,t),r}function hm(){let t={registry:{}},e=Or.bind(null,t);return dc(e,t),e}var hc={Singular:dm,Collection:hm};var fm="0.0.0-development",lm=`octokit-endpoint.js/${fm} ${ve()}`,pm={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":lm},mediaType:{format:""}};function mm(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function ym(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);if(e===null)return!0;let r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}function pc(t,e){let r=Object.assign({},t);return Object.keys(e).forEach(s=>{ym(e[s])?s in t?r[s]=pc(t[s],e[s]):Object.assign(r,{[s]:e[s]}):Object.assign(r,{[s]:e[s]})}),r}function fc(t){for(let e in t)t[e]===void 0&&delete t[e];return t}function on(t,e,r){if(typeof e=="string"){let[n,i]=e.split(" ");r=Object.assign(i?{method:n,url:i}:{url:n},r)}else r=Object.assign({},e);r.headers=mm(r.headers),fc(r),fc(r.headers);let s=pc(t||{},r);return r.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(s.mediaType.previews=t.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function gm(t,e){let r=/\?/.test(t)?"&":"?",s=Object.keys(e);return s.length===0?t:t+r+s.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}var _m=/\{[^{}}]+\}/g;function bm(t){return t.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function wm(t){let e=t.match(_m);return e?e.map(bm).reduce((r,s)=>r.concat(s),[]):[]}function lc(t,e){let r={__proto__:null};for(let s of Object.keys(t))e.indexOf(s)===-1&&(r[s]=t[s]);return r}function mc(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function yt(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Vt(t,e,r){return e=t==="+"||t==="#"?mc(e):yt(e),r?yt(r)+"="+e:e}function mt(t){return t!=null}function nn(t){return t===";"||t==="&"||t==="?"}function xm(t,e,r,s){var n=t[r],i=[];if(mt(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),i.push(Vt(e,n,nn(e)?r:""));else if(s==="*")Array.isArray(n)?n.filter(mt).forEach(function(o){i.push(Vt(e,o,nn(e)?r:""))}):Object.keys(n).forEach(function(o){mt(n[o])&&i.push(Vt(e,n[o],o))});else{let o=[];Array.isArray(n)?n.filter(mt).forEach(function(a){o.push(Vt(e,a))}):Object.keys(n).forEach(function(a){mt(n[a])&&(o.push(yt(a)),o.push(Vt(e,n[a].toString())))}),nn(e)?i.push(yt(r)+"="+o.join(",")):o.length!==0&&i.push(o.join(","))}else e===";"?mt(n)&&i.push(yt(r)):n===""&&(e==="&"||e==="?")?i.push(yt(r)+"="):n===""&&i.push("");return i}function vm(t){return{expand:Em.bind(null,t)}}function Em(t,e){var r=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,i){if(n){let a="",c=[];if(r.indexOf(n.charAt(0))!==-1&&(a=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(d){var h=/([^:\*]*)(?::(\d+)|(\*))?/.exec(d);c.push(xm(e,a,h[1],h[2]||h[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return mc(i)}),t==="/"?t:t.replace(/\/$/,"")}function yc(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},t.headers),n,i=lc(t,["method","baseUrl","url","headers","request","mediaType"]),o=wm(r);r=vm(r).expand(i),/^http/.test(r)||(r=t.baseUrl+r);let a=Object.keys(t).filter(h=>o.includes(h)).concat("baseUrl"),c=lc(i,a);if(!/application\/octet-stream/i.test(s.accept)&&(t.mediaType.format&&(s.accept=s.accept.split(/,/).map(h=>h.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&t.mediaType.previews?.length)){let h=s.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];s.accept=h.concat(t.mediaType.previews).map(y=>{let m=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${y}-preview${m}`}).join(",")}return["GET","HEAD"].includes(e)?r=gm(r,c):"data"in c?n=c.data:Object.keys(c).length&&(n=c),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n>"u"&&(n=""),Object.assign({method:e,url:r,headers:s},typeof n<"u"?{body:n}:null,t.request?{request:t.request}:null)}function km(t,e,r){return yc(on(t,e,r))}function gc(t,e){let r=on(t,e),s=km.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:gc.bind(null,r),merge:on.bind(null,r),parse:yc})}var _c=gc(null,pm);var kc=We(vc(),1);var Fe=class extends Error{name;status;request;response;constructor(e,r,s){super(e),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0),"response"in s&&(this.response=s.response);let n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};var Tm="10.0.3",Sm={headers:{"user-agent":`octokit-request.js/${Tm} ${ve()}`}};function Am(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);if(e===null)return!0;let r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}async function Ec(t){let e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let r=t.request?.log||console,s=t.request?.parseSuccessResponseBody!==!1,n=Am(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,i=Object.fromEntries(Object.entries(t.headers).map(([y,m])=>[y,String(m)])),o;try{o=await e(t.url,{method:t.method,body:n,redirect:t.request?.redirect,headers:i,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(y){let m="Unknown Error";if(y instanceof Error){if(y.name==="AbortError")throw y.status=500,y;m=y.message,y.name==="TypeError"&&"cause"in y&&(y.cause instanceof Error?m=y.cause.message:typeof y.cause=="string"&&(m=y.cause))}let b=new Fe(m,500,{request:t});throw b.cause=y,b}let a=o.status,c=o.url,d={};for(let[y,m]of o.headers)d[y]=m;let h={url:c,status:a,headers:d,data:""};if("deprecation"in d){let y=d.link&&d.link.match(/<([^<>]+)>; rel="deprecation"/),m=y&&y.pop();r.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${d.sunset}${m?`. See ${m}`:""}`)}if(a===204||a===205)return h;if(t.method==="HEAD"){if(a<400)return h;throw new Fe(o.statusText,a,{response:h,request:t})}if(a===304)throw h.data=await an(o),new Fe("Not modified",a,{response:h,request:t});if(a>=400)throw h.data=await an(o),new Fe(Cm(h.data),a,{response:h,request:t});return h.data=s?await an(o):o.body,h}async function an(t){let e=t.headers.get("content-type");if(!e)return t.text().catch(()=>"");let r=(0,kc.safeParse)(e);if(Rm(r)){let s="";try{return s=await t.text(),JSON.parse(s)}catch{return s}}else return r.type.startsWith("text/")||r.parameters.charset?.toLowerCase()==="utf-8"?t.text().catch(()=>""):t.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Rm(t){return t.type==="application/json"||t.type==="application/scim+json"}function Cm(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){let e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(r=>JSON.stringify(r)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function cn(t,e){let r=t.defaults(e);return Object.assign(function(n,i){let o=r.merge(n,i);if(!o.request||!o.request.hook)return Ec(r.parse(o));let a=(c,d)=>Ec(r.parse(r.merge(c,d)));return Object.assign(a,{endpoint:r,defaults:cn.bind(null,r)}),o.request.hook(a,o)},{endpoint:r,defaults:cn.bind(null,r)})}var Gt=cn(_c,Sm);var Om="0.0.0-development";function Pm(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var jm=class extends Error{constructor(t,e,r){super(Pm(r)),this.request=t,this.headers=e,this.response=r,this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},Nm=["method","baseUrl","url","headers","request","query","mediaType","operationName"],Im=["query","method","url"],Tc=/\/api\/v3\/?$/;function qm(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in r)if(Im.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let s=typeof e=="string"?Object.assign({query:e},r):e,n=Object.keys(s).reduce((o,a)=>Nm.includes(a)?(o[a]=s[a],o):(o.variables||(o.variables={}),o.variables[a]=s[a],o),{}),i=s.baseUrl||t.endpoint.DEFAULTS.baseUrl;return Tc.test(i)&&(n.url=i.replace(Tc,"/api/graphql")),t(n).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new jm(n,a,o.data)}return o.data.data})}function un(t,e){let r=t.defaults(e);return Object.assign((n,i)=>qm(r,n,i),{defaults:un.bind(null,r),endpoint:r.endpoint})}var mw=un(Gt,{headers:{"user-agent":`octokit-graphql.js/${Om} ${ve()}`},method:"POST",url:"/graphql"});function Sc(t){return un(t,{method:"POST",url:"/graphql"})}var dn="(?:[a-zA-Z0-9_-]+)",Ac="\\.",Rc=new RegExp(`^${dn}${Ac}${dn}${Ac}${dn}$`),$m=Rc.test.bind(Rc);async function Lm(t){let e=$m(t),r=t.startsWith("v1.")||t.startsWith("ghs_"),s=t.startsWith("ghu_");return{type:"token",token:t,tokenType:e?"app":r?"installation":s?"user-to-server":"oauth"}}function Um(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Dm(t,e,r,s){let n=e.endpoint.merge(r,s);return n.headers.authorization=Um(t),e(n)}var Cc=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Lm.bind(null,e),{hook:Dm.bind(null,e)})};var hn="7.0.2";var Oc=()=>{},Hm=console.warn.bind(console),Mm=console.error.bind(console),Pc=`octokit-core.js/${hn} ${ve()}`,Ir=class{static VERSION=hn;static defaults(e){return class extends this{constructor(...s){let n=s[0]||{};if(typeof e=="function"){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let r=this.plugins;return class extends this{static plugins=r.concat(e.filter(n=>!r.includes(n)))}}constructor(e={}){let r=new hc.Collection,s={baseUrl:Gt.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(s.headers["user-agent"]=e.userAgent?`${e.userAgent} ${Pc}`:Pc,e.baseUrl&&(s.baseUrl=e.baseUrl),e.previews&&(s.mediaType.previews=e.previews),e.timeZone&&(s.headers["time-zone"]=e.timeZone),this.request=Gt.defaults(s),this.graphql=Sc(this.request).defaults(s),this.log=Object.assign({debug:Oc,info:Oc,warn:Hm,error:Mm},e.log),this.hook=r,e.authStrategy){let{authStrategy:i,...o}=e,a=i(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{let i=Cc(e.auth);r.wrap("request",i.hook),this.auth=i}let n=this.constructor;for(let i=0;i<n.plugins.length;++i)Object.assign(this,n.plugins[i](this,e))}request;graphql;log;hook;auth};var zm=(t,e)=>`The cursor at "${t.join(",")}" did not change its value "${e}" after a page transition. Please make sure your that your query is set up correctly.`,Bm=class extends Error{constructor(t,e){super(zm(t.pathInQuery,e)),this.pageInfo=t,this.cursorValue=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="MissingCursorChangeError"},Fm=class extends Error{constructor(t){super(`No pageInfo property found in response. Please make sure to specify the pageInfo in your query. Response-Data: ${JSON.stringify(t,null,2)}`),this.response=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="MissingPageInfo"},Vm=t=>Object.prototype.toString.call(t)==="[object Object]";function jc(t){let e=Nc(t,"pageInfo");if(e.length===0)throw new Fm(t);return e}var Nc=(t,e,r=[])=>{for(let s of Object.keys(t)){let n=[...r,s],i=t[s];if(Vm(i)){if(i.hasOwnProperty(e))return n;let o=Nc(i,e,n);if(o.length>0)return o}}return[]},Zt=(t,e)=>e.reduce((r,s)=>r[s],t),fn=(t,e,r)=>{let s=e[e.length-1],n=[...e].slice(0,-1),i=Zt(t,n);typeof r=="function"?i[s]=r(i[s]):i[s]=r},Wm=t=>{let e=jc(t);return{pathInQuery:e,pageInfo:Zt(t,[...e,"pageInfo"])}},Ic=t=>t.hasOwnProperty("hasNextPage"),Gm=t=>Ic(t)?t.endCursor:t.startCursor,Zm=t=>Ic(t)?t.hasNextPage:t.hasPreviousPage,qc=t=>(e,r={})=>{let s=!0,n={...r};return{[Symbol.asyncIterator]:()=>({async next(){if(!s)return{done:!0,value:{}};let i=await t.graphql(e,n),o=Wm(i),a=Gm(o.pageInfo);if(s=Zm(o.pageInfo),s&&a===n.cursor)throw new Bm(o,a);return n={...n,cursor:a},{done:!1,value:i}}})}},Jm=(t,e)=>{if(Object.keys(t).length===0)return Object.assign(t,e);let r=jc(t),s=[...r,"nodes"],n=Zt(e,s);n&&fn(t,s,c=>[...c,...n]);let i=[...r,"edges"],o=Zt(e,i);o&&fn(t,i,c=>[...c,...o]);let a=[...r,"pageInfo"];return fn(t,a,Zt(e,a)),t},Km=t=>{let e=qc(t);return async(r,s={})=>{let n={};for await(let i of e(r,s))n=Jm(n,i);return n}};function $c(t){return{graphql:Object.assign(t.graphql,{paginate:Object.assign(Km(t),{iterator:qc(t)})})}}var qr=class{octokit;constructor(e){this.octokit=new(Ir.plugin($c))({auth:`token ${e}`,previews:["hawkgirl"],request:{timeout:0}})}async queryDependencyGraph(e,r){let s=await this.octokit.graphql(`query ($owner: String!, $name: String!) {
              repository(owner: $owner, name: $name) {
                dependencyGraphManifests {
                  nodes {
                    blobPath
                    dependencies {
                      nodes {
                        packageManager
                        packageName
                        requirements
                      }
                    }
                    dependenciesCount
                    exceedsMaxSize
                    filename
                    parseable
                  }
                }
              }
            }`,{owner:e,name:r}),n=await Vi.safeParseAsync(s);if(!n.success)throw console.log(`::error::Invalid response: ${n.error}`),new Error;return n.data}};var Ve=new sr,Ym=new qr(Ve.token),Xm=await Ym.queryDependencyGraph(Ve.repoOwner,Ve.repoName),ey=Xm.repository.dependencyGraphManifests.nodes.flatMap(t=>t.dependencies.nodes.map(nr.convertToCoordinate)).filter(u.nonEmptyString),ty=new Cr,$r=await ty.fetchNoticeFile(ey,Ve.format);for(let t of $r.summary.warnings.noCopyright)console.log(`::warning::Unable to locate copyright for ${t}`);for(let t of $r.summary.warnings.noDefinition)console.log(`::warning::Unable to find package ${t}`);for(let t of $r.summary.warnings.noLicense)console.log(`::warning::Unable to find locate license for ${t}`);var mn=Qm.join(process.env.GITHUB_WORKSPACE,Ve.filename);pn.writeFileSync(mn,$r.content);console.log(`notice-file-path=${mn}
notice-filename=${Ve.filename}`);var ln=process.env.GITHUB_OUTPUT;ln&&(pn.appendFileSync(ln,`notice-file-path=${mn}
`),pn.appendFileSync(ln,`notice-filename=${Ve.filename}
`));
